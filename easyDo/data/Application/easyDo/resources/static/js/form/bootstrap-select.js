/*!
 * Bootstrap-select v1.7.2 (http://silviomoreto.github.io/bootstrap-select)
 *
 * Copyright 2013-2015 bootstrap-select
 * Licensed under MIT (https://github.com/silviomoreto/bootstrap-select/blob/master/LICENSE)
 */
function loadCascadeMenu($fieldUl,data,isSearched,isInit,isSearchDB,parentId,type,parentType){!data&&isSearchDB&&"Y"==isSearchDB&&jQuery.ajax({cache:!0,type:"POST",url:"/getChildrenData",data:{parentId:parentId,type:type,parentType:parentType},async:!1,success:function(cData){cData&&(data=eval("("+cData+")"))}});var menuWarpHtml='<div class="cascader-menu-wrap">';isSearched&&"Y"==isSearched&&(menuWarpHtml+='\t<div class="cas-searchbox"><input type="text" class="form-control" autocomplete="off"><i class="zmdi zmdi-search"></i></div>'),menuWarpHtml+='\t<ul class="cascader-menu-list"></ul>',menuWarpHtml+="</div>";var $menuWrap=jQuery(menuWarpHtml),$panel=$fieldUl.find(".cascader-panel");isInit&&$panel.html(""),$menuWrap.appendTo($panel);var $menuList=$menuWrap.find(".cascader-menu-list");data&&data.length||$menuList.append('<li class="no-results" style="display: list-item;">没有找到匹配项</li>'),$menuWrap.find(".cas-searchbox .form-control").on("input propertychange",(function(){if($menuList.find(".no-results").remove(),jQuery(this).val()){$menuWrap.find(".cascader-menu-list li").addClass("hide");var e=$menuWrap.find('.cascader-menu-list .cascader-node-label:contains("'+jQuery(this).val()+'")');e.length?e.parent().removeClass("hide"):$menuList.append('<li class="no-results" style="display: list-item;">没有找到匹配项</li>')}else $menuWrap.find(".cascader-menu-list li").removeClass("hide")}));for(var children="",li,$li,levelValue=$fieldUl.find('input[attrsign="_levelValue"]').val(),isChecked,type,isSearchDB,i=0;i<data.length;i++)children=data[i].children,isChecked=levelValue&&levelValue.indexOf(data[i].value)>-1,type=data[i].type,isSearchDB=data[i].isSearchDB,!type||"HEAD"!=type&&"LINE"!=type?(li='<li class="cascader-node '+(isChecked?"in-checked-path":"")+'" val="'+data[i].value+'" isSearchDB="'+isSearchDB+'" parentType="'+parentId+'">',!isChecked||children||isSearchDB||(li+=' <i class="zmdi zmdi-check is-selected-icon"></i>',li+=' <i class="zmdi zmdi-tag-close" title="清空选项" onclick="clearOption(jQuery(this))"></i>'),li+='\t\t<span class="cascader-node-label" title="'+data[i].label+'">'+data[i].label+"</span>",(children||isSearchDB&&"Y"==isSearchDB)&&(li+='\t\t<i class="zmdi zmdi-chevron-right"></i>'),li+="</li>",$li=jQuery(li),children&&$li.data("bindData",children),$li.click((function(){var e=jQuery(this),t=e.closest("ul");t.find(".in-checked-path").removeClass("in-checked-path"),t.find(".is-selected-icon, .zmdi-tag-close").remove(),e.closest(".cascader-menu-wrap").nextAll().remove(),e.addClass("in-checked-path");var i=e.data("bindData"),n=e.attr("isSearchDB");if(i||n&&"Y"==n)loadCascadeMenu($fieldUl,i,isSearched,"",n,e.attr("val"),$fieldUl.attr("field"),e.attr("parentType"));else{e.prepend('<i class="zmdi zmdi-check is-selected-icon"></i><i class="zmdi zmdi-tag-close" title="清空选项" onclick="clearOption(jQuery(this))"></i>');var s="",a="",o="";$fieldUl.find(".in-checked-path").each((function(){var e=jQuery(this);s&&(s+=" / ",a+=" / "),s+=e.find(".cascader-node-label").text(),o=e.attr("val"),a+=o})),$fieldUl.find('input[attrsign="_ids"]').val(o),$fieldUl.find('input[attrsign="_levelValue"]').val(a),$fieldUl.find(".form-control-select").val(s).click(),"function"==typeof changeCaseCadeValue&&changeCaseCadeValue($fieldUl)}}))):("HEAD"==type?(li='<li class="dropdown-header">',li+=' <span class="text">'+data[i].label+"</span>",li+="</li>"):li='<li class="divider"></li>',$li=jQuery(li)),$li.appendTo($menuWrap.find("ul"))}function selectCascadeMenu($obj){var $fieldContent=$obj.closest(".field-content"),$fieldUl=$obj.closest(".field-li"),fieldName=$fieldUl.attr("field");if($fieldContent.find(".cascader-menu-wrap").length||(data=$fieldContent.find('input[attrsign="casCadeData"]').val(),data&&(data=eval("("+data+")")),loadCascadeMenu($fieldUl,data,$fieldContent.find(".form-control-select").attr("isseached"),"Y")),$fieldContent.hasClass("is-focus"))$fieldContent.removeClass("is-focus"),$fieldContent.find(".cascader-panel-wrap").hide();else{$fieldContent.addClass("is-focus");var top=$fieldContent.offset().top-jQuery(document).scrollTop(),bottom=jQuery(window).height()-top-$fieldContent.outerHeight(),maxHeight=0;bottom>top?(maxHeight=bottom-40,$fieldContent.find(".cascader-panel").removeClass("upward")):(maxHeight=top-40,$fieldContent.find(".cascader-panel").addClass("upward")),maxHeight<350?$fieldContent.find(".cascader-menu-list").css("max-height",maxHeight+"px"):$fieldContent.find(".cascader-menu-list").css("max-height","350px"),$fieldContent.find(".cascader-panel-wrap").show()}var $fieldCascade=jQuery('.field-li[field!="'+fieldName+'"][setcascade="Y"] .field-content.cascade');$fieldCascade.removeClass("is-focus"),$fieldCascade.find(".cascader-panel-wrap").hide()}function clearOption(e){stopPropagation();var t=e.closest(".field-li");t.find('input[attrsign="_ids"]').val(""),t.find('input[attrsign="_levelValue"]').val(""),t.find(".form-control-select").val("").click(),t.find(".is-selected-icon, .zmdi-tag-close").remove(),t.find(".in-checked-path").removeClass("in-checked-path"),t.find(".cascader-menu-wrap:not(:first)").remove()}!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],(function(e){return t()})):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(0,(function(){!function(e){"use strict";var t,i,n,s;function a(t){return e.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],(function(){t=t.replace(this.re,this.ch)})),t}function o(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i="(?:"+Object.keys(t).join("|")+")",n=new RegExp(i),s=new RegExp(i,"g"),a=null==e?"":""+e;return n.test(a)?a.replace(s,(function(e){return t[e]})):a}String.prototype.includes||(t={}.toString,i=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),n="".indexOf,s=function(e){if(null==this)throw TypeError();var i=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var s=i.length,a=String(e),o=a.length,l=arguments.length>1?arguments[1]:void 0,d=l?Number(l):0;return d!=d&&(d=0),!(o+Math.min(Math.max(d,0),s)>s)&&-1!=n.call(i,a,d)},i?i(String.prototype,"includes",{value:s,configurable:!0,writable:!0}):String.prototype.includes=s),String.prototype.startsWith||function(){var e=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),t={}.toString,i=function(e){if(null==this)throw TypeError();var i=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var n=i.length,s=String(e),a=s.length,o=arguments.length>1?arguments[1]:void 0,l=o?Number(o):0;l!=l&&(l=0);var d=Math.min(Math.max(l,0),n);if(a+d>n)return!1;for(var r=-1;++r<a;)if(i.charCodeAt(d+r)!=s.charCodeAt(r))return!1;return!0};e?e(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i}(),Object.keys||(Object.keys=function(e,t,i){for(t in i=[],e)i.hasOwnProperty.call(e,t)&&i.push(t);return i}),e.expr[":"].icontains=function(t,i,n){var s=e(t);return(s.data("tokens")||s.text()).toUpperCase().includes(n[3].toUpperCase())},e.expr[":"].ibegins=function(t,i,n){var s=e(t);return(s.data("tokens")||s.text()).toUpperCase().startsWith(n[3].toUpperCase())},e.expr[":"].aicontains=function(t,i,n){var s=e(t);return(s.data("tokens")||s.data("normalizedText")||s.text()).toUpperCase().includes(n[3].toUpperCase())},e.expr[":"].aibegins=function(t,i,n){var s=e(t);return(s.data("tokens")||s.data("normalizedText")||s.text()).toUpperCase().startsWith(n[3].toUpperCase())};var l=function(t,i,n){n&&(n.stopPropagation(),n.preventDefault()),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=i,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.options.maxHeight=this.$element.attr("maxHeight"),this.val=l.prototype.val,this.render=l.prototype.render,this.refresh=l.prototype.refresh,this.setStyle=l.prototype.setStyle,this.selectAll=l.prototype.selectAll,this.deselectAll=l.prototype.deselectAll,this.destroy=l.prototype.remove,this.remove=l.prototype.remove,this.show=l.prototype.show,this.hide=l.prototype.hide,this.init()};function d(t,i){var n,s=arguments,a=t,o=i;[].shift.apply(s);var d=this.each((function(){var t=e(this);if(t.is("select")){var i=t.data("selectpicker"),d="object"==typeof a&&a;if(i){if(d)for(var r in d)d.hasOwnProperty(r)&&(i.options[r]=d[r])}else{var c=e.extend({},l.DEFAULTS,e.fn.selectpicker.defaults||{},t.data(),d);t.data("selectpicker",i=new l(this,c,o))}"string"==typeof a&&(n=i[a]instanceof Function?i[a].apply(i,s):i.options[a])}}));return void 0!==n?n:d}l.VERSION="1.7.2",l.DEFAULTS={noneSelectedText:"没有选中任何项",noneResultsText:"没有找到匹配项",countSelectedText:function(e,t){return"选择了{0}项"},maxOptionsText:function(e,t){return["超出限制 (最多选择{n}项)","组选择超出限制(最多选择{n}组)"]},selectAllText:"全选",deselectAllText:"反选",doneButton:!0,doneButtonText:"关闭",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1},l.prototype={constructor:l,init:function(){var t=this,i=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.liObj={},this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),void 0!==i&&(this.$button.attr("data-id",i),e('label[for="'+i+'"]').click((function(e){e.preventDefault(),t.$button.focus()}))),this.checkDisabled(),this.clickListener(),this.options.liveSearch?this.liveSearchListener():this.liveListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on("hide.bs.dropdown",(function(e){t.$element.trigger("hide.bs.select",e)})),this.$newElement.on("hidden.bs.dropdown",(function(e){t.$element.trigger("hidden.bs.select",e)})),this.$newElement.on("show.bs.dropdown",(function(e){t.$element.trigger("show.bs.select",e)})),this.$newElement.on("shown.bs.dropdown",(function(e){t.$element.trigger("shown.bs.select",e)})),setTimeout((function(){t.$element.trigger("loaded.bs.select")}))},createDropdown:function(){var t=this.multiple?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",n=this.autofocus?" autofocus":"",s=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",a=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+o(this.options.liveSearchPlaceholder)+'"')+'><i class="zmdi zmdi-search"></i></div>':"",l=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",d=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",r='<div class="btn-group bootstrap-select'+t+i+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+n+'><span class="filter-option pull-left"></span>&nbsp;<span class="carets zmdi zmdi-caret-down"></span></button><div class="dropdown-menu open">'+s+a+l+'<ul class="dropdown-menu inner" role="menu"></ul>'+d+"</div></div>";return e(r)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul")[0].innerHTML=t,e},reloadLi:function(){this.destroyLi();var e=this.createLi();this.$menuInner[0].innerHTML=e},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var t=this,i=[],n=0,s=document.createElement("option"),l=-1,d=function(e,t,i,n,s){return"<li"+(void 0!==i&""!==i?' class="'+i+'"':"")+(void 0!==t&null!==t?' data-original-index="'+t+'"':"")+(void 0!==n&null!==n?'data-optgroup="'+n+'"':"")+' title="'+s+'">'+e+"</li>"},r=function(e,i,n,s){return'<a tabindex="0"'+(void 0!==i?' class="'+i+'"':"")+(void 0!==n?' style="'+n+'"':"")+(t.options.liveSearchNormalize?' data-normalized-text="'+a(o(e))+'"':"")+(void 0!==s||null!==s?' data-tokens="'+s+'"':"")+">"+e+'<span class="'+("Y"==jQuery("#isEditFlowChart").val()?"zmdi zmdi-ok":t.options.iconBase+" "+t.options.tickIcon)+' check-mark"></span></a>'};if(this.options.title&&!this.multiple&&(l--,!this.$element.find(".bs-title-option").length)){var c=this.$element[0];s.className="bs-title-option",s.appendChild(document.createTextNode(this.options.title)),s.value="",c.insertBefore(s,c.firstChild),null===c.options[c.selectedIndex].getAttribute("selected")&&(s.selected=!0)}return this.$element.find("option").each((function(s){var a=e(this);if(l++,!a.hasClass("bs-title-option")){var o=this.className||"",c=this.style.cssText,h=a.data("content")?a.data("content"):a.html(),p=a.data("tokens")?a.data("tokens"):null,u=void 0!==a.data("subtext")?'<small class="text-muted">'+a.data("subtext")+"</small>":"",m=void 0!==a.data("icon")?'<span class="'+t.options.iconBase+" "+a.data("icon")+'"></span> ':"",f=this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled,v=a.attr("title");if(v||(v=""),""!==m&&f&&(m="<span>"+m+"</span>"),t.options.hideDisabled&&f)l--;else{if(a.data("content")||(h=m+'<span class="text">'+h+u+"</span>"),"OPTGROUP"===this.parentElement.tagName&&!0!==a.data("divider")){if(0===a.index()){n+=1;var g=this.parentElement.label,$=void 0!==a.parent().data("subtext")?'<small class="text-muted">'+a.parent().data("subtext")+"</small>":"",b=a.parent().data("icon")?'<span class="'+t.options.iconBase+" "+a.parent().data("icon")+'"></span> ':"",x=" "+this.parentElement.className||"";g=b+'<span class="text">'+g+$+"</span>",0!==s&&i.length>0&&(l++,i.push(d("",null,"divider",n+"div",v))),l++,i.push(d(g,null,"dropdown-header"+x,n,v))}i.push(d(r(h,"opt "+o+x,c,p),s,"",n,v))}else!0===a.data("divider")?i.push(d("",s,"divider","",v)):!0===a.data("hidden")?i.push(d(r(h,o,c,p),s,"hidden is-hidden","",v)):(this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName&&(l++,i.push(d("",null,"divider",n+"div",v))),i.push(d(r(h,o,c,p),s,"","",v)));t.liObj[s]=l}}})),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),i.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(t){var i,n=this;!1!==t&&this.$element.find("option").each((function(e){var t=n.findLis().eq(n.liObj[e]);n.setDisabled(e,this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled,t),n.setSelected(e,this.selected,t)})),this.tabIndex();var s=this.$element.find("option").map((function(){if(this.selected){if(n.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled))return!1;var t,i=e(this),s=i.data("icon")&&n.options.showIcon?'<i class="'+n.options.iconBase+" "+i.data("icon")+'"></i> ':"";return t=n.options.showSubtext&&i.data("subtext")&&!n.multiple?' <small class="text-muted">'+i.data("subtext")+"</small>":"",i.data("content")&&n.options.showContent?i.data("content"):void 0!==i.attr("title")?i.attr("title"):s+i.html()+t}})).toArray(),a=this.multiple?s.join(this.options.multipleSeparator):s[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var o=this.options.selectedTextFormat.split(">");if(o.length>1&&s.length>o[1]||1==o.length&&s.length>=2){i=this.options.hideDisabled?", [disabled]":"";var l=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+i).length;a=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(s.length,l):this.options.countSelectedText).replace("{0}",s.length.toString()).replace("{1}",l.toString())}}null==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(a=this.options.title),a||(a=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),a&&(this.$button.attr("title",e.trim(a.toString().replace(/<[^>]*>?/g,""))),this.$button.children(".filter-option").html(a),this.$element.trigger("rendered.bs.select"))},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var i=e||this.options.style;"add"==t?this.$button.addClass(i):"remove"==t?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(t){if(t||!1!==this.options.size&&!this.sizeInfo){var i=document.createElement("div"),n=document.createElement("div"),s=document.createElement("ul"),a=document.createElement("li"),o=document.createElement("li"),l=document.createElement("a"),d=document.createElement("span"),r=this.options.header?this.$menu.find(".popover-title")[0].cloneNode(!0):null,c=this.options.liveSearch?document.createElement("div"):null,h=this.options.actionsBox&&this.multiple?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,p=this.options.doneButton&&this.multiple?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(d.className="text",i.className=this.$menu[0].parentNode.className+" open",n.className="dropdown-menu open",s.className="dropdown-menu inner",a.className="divider",d.appendChild(document.createTextNode("Inner text")),l.appendChild(d),o.appendChild(l),s.appendChild(o),s.appendChild(a),r&&n.appendChild(r),c){var u=document.createElement("span");c.className="bs-searchbox",u.className="form-control",c.appendChild(u),n.appendChild(c)}h&&n.appendChild(h),n.appendChild(s),p&&n.appendChild(p),i.appendChild(n),document.body.appendChild(i);var m=l.offsetHeight,f=r?r.offsetHeight:0,v=c?c.offsetHeight:0,g=h?h.offsetHeight:0,$=p?p.offsetHeight:0,b=e(a).outerHeight(!0),x=!!getComputedStyle&&getComputedStyle(n),C=x?e(n):null,y=parseInt(x?x.paddingTop:C.css("paddingTop"))+parseInt(x?x.paddingBottom:C.css("paddingBottom"))+parseInt(x?x.borderTopWidth:C.css("borderTopWidth"))+parseInt(x?x.borderBottomWidth:C.css("borderBottomWidth")),w=y+parseInt(x?x.marginTop:C.css("marginTop"))+parseInt(x?x.marginBottom:C.css("marginBottom"))+2;document.body.removeChild(i),this.sizeInfo={liHeight:m,headerHeight:f,searchHeight:v,actionsHeight:g,doneButtonHeight:$,dividerHeight:b,menuPadding:y,menuExtras:w}}},setSize:function(){this.findLis(),this.liHeight();var t,i,n,s,a=this,o=this.$menu,l=this.$menuInner,d=e(window),r=this.$newElement[0].offsetHeight,c=this.sizeInfo.liHeight,h=this.sizeInfo.headerHeight,p=this.sizeInfo.searchHeight,u=this.sizeInfo.actionsHeight,m=this.sizeInfo.doneButtonHeight,f=this.sizeInfo.dividerHeight,v=this.sizeInfo.menuPadding,g=this.sizeInfo.menuExtras,$=this.options.hideDisabled?".disabled":"",b=function(){n=a.$newElement.offset().top-d.scrollTop(),s=d.height()-n-r};if(b(),this.options.header&&o.css("padding-top",0),"auto"===this.options.size){var x=function(){var d,r=function(t,i){return function(n){return i?n.classList?n.classList.contains(t):e(n).hasClass(t):!(n.classList?n.classList.contains(t):e(n).hasClass(t))}},f=a.$menuInner[0].getElementsByTagName("li"),$=Array.prototype.filter?Array.prototype.filter.call(f,r("hidden",!1)):a.$lis.not(".hidden"),x=Array.prototype.filter?Array.prototype.filter.call($,r("dropdown-header",!0)):$.filter(".dropdown-header");b(),t=s-g,a.options.container?(o.data("height")||o.data("height",o.height()),i=o.data("height")):i=o.height();var C=a.options.maxHeight;C&&(i=C),a.options.dropupAuto&&a.$newElement.toggleClass("dropup",n>s&&t-g<i),a.$newElement.hasClass("dropup")&&(t=n-g),d=$.length+x.length>3?3*c+g-2:0,C||(C=t-h-p-u-m-v),o.css({"max-height":C+"px",overflow:"hidden","min-height":d+h+p+u+m+"px"}),l.css({"max-height":C-40+"px","overflow-y":"auto","min-height":Math.max(d-v,0)+"px"})};x(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",x),d.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",x)}else if(this.options.size&&"auto"!=this.options.size&&this.$lis.not($).length>this.options.size){var C=this.$lis.not(".divider").not($).children().slice(0,this.options.size).last().parent().index(),y=this.$lis.slice(0,C+1).filter(".divider").length;t=c*this.options.size+y*f+v,a.options.container?(o.data("height")||o.data("height",o.height()),i=o.data("height")):i=o.height(),a.options.dropupAuto&&this.$newElement.toggleClass("dropup",n>s&&t-g<i),o.css({"max-height":t-v+"px",overflow:"hidden","min-height":""}),l.css({"max-height":t-v+"px","overflow-y":"auto","min-height":""})}},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var e=this.$menu.parent().clone().appendTo("body"),t=this.options.container?this.$newElement.clone().appendTo("body"):e,i=e.children(".dropdown-menu").outerWidth(),n=t.css("width","auto").children("button").outerWidth();e.remove(),t.remove(),this.$newElement.css("width",Math.max(i,n)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var t,i,n=this,s=e("<div />"),a=function(e){s.addClass(e.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),i=e.hasClass("dropup")?0:e[0].offsetHeight,s.css({top:t.top+i,left:t.left,width:e[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",(function(){n.isDisabled()||(a(e(this)),s.appendTo(n.options.container),s.toggleClass("open",!e(this).hasClass("open")),s.append(n.$menu))})),e(window).on("resize scroll",(function(){a(n.$newElement)})),this.$element.on("hide.bs.select",(function(){n.$menu.data("height",n.$menu.height()),s.detach()}))},setSelected:function(e,t,i){if(!i)i=this.findLis().eq(this.liObj[e]);i.toggleClass("selected",t)},setDisabled:function(e,t,i){if(!i)i=this.findLis().eq(this.liObj[e]);t?i.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):i.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled")),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click((function(){return!e.isDisabled()}))},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var t=this,i=e(document);this.$newElement.on("touchstart.dropdown",".dropdown-menu",(function(e){e.stopPropagation()})),i.data("spaceSelect",!1),this.$button.on("keyup",(function(e){/(32)/.test(e.keyCode.toString(10))&&i.data("spaceSelect")&&(e.preventDefault(),i.data("spaceSelect",!1))})),this.$newElement.on("click",(function(){t.setSize(),t.$element.on("shown.bs.select",(function(){if(t.options.liveSearch||t.multiple){if(!t.multiple){var e=t.liObj[t.$element[0].selectedIndex];if("number"!=typeof e)return;var i=t.$lis.eq(e)[0].offsetTop-t.$menuInner[0].offsetTop;i=i-t.$menuInner[0].offsetHeight/2+t.sizeInfo.liHeight/2,t.$menuInner[0].scrollTop=i}}else t.$menu.find(".selected a").focus()}))})),this.$menu.on("click","li a",(function(i){var n=e(this),s=n.parent().data("originalIndex"),a=t.$element.val(),o=t.$element.prop("selectedIndex");if(t.multiple&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!n.parent().hasClass("disabled")){var l=t.$element.find("option"),d=l.eq(s),r=d.prop("selected"),c=d.parent("optgroup"),h=t.options.maxOptions,p=c.data("maxOptions")||!1;if(t.multiple){if(d.prop("selected",!r),t.setSelected(s,!r),n.blur(),!1!==h||!1!==p){var u=h<l.filter(":selected").length,m=p<c.find("option:selected").length;if(h&&u||p&&m)if(h&&1==h)l.prop("selected",!1),d.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(s,!0);else if(p&&1==p){c.find("option:selected").prop("selected",!1),d.prop("selected",!0);var f=n.parent().data("optgroup");t.$menu.find('[data-optgroup="'+f+'"]').removeClass("selected"),t.setSelected(s,!0)}else{var v="function"==typeof t.options.maxOptionsText?t.options.maxOptionsText(h,p):t.options.maxOptionsText,g=v[0].replace("{n}",h),$=v[1].replace("{n}",p),b=e('<div class="notify"></div>');v[2]&&(g=g.replace("{var}",v[2][h>1?0:1]),$=$.replace("{var}",v[2][p>1?0:1])),d.prop("selected",!1),t.$menu.append(b),h&&u&&(b.append(e("<div>"+g+"</div>")),t.$element.trigger("maxReached.bs.select")),p&&m&&(b.append(e("<div>"+$+"</div>")),t.$element.trigger("maxReachedGrp.bs.select")),setTimeout((function(){t.setSelected(s,!1)}),10),b.delay(750).fadeOut(300,(function(){e(this).remove()}))}}}else l.prop("selected",!1),d.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(s,!0);t.multiple?t.options.liveSearch&&t.$searchbox.focus():t.$button.focus(),(a!=t.$element.val()&&t.multiple||o!=t.$element.prop("selectedIndex")&&!t.multiple)&&(t.$element.change(),t.$element.trigger("changed.bs.select",[s,d.prop("selected"),r]))}})),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",(function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),t.options.liveSearch&&!e(i.target).hasClass("close")?t.$searchbox.focus():t.$button.focus())})),this.$menu.on("click","li.divider, li.dropdown-header",(function(e){e.preventDefault(),e.stopPropagation(),t.options.liveSearch?t.$searchbox.focus():t.$button.focus()})),this.$menu.on("click",".popover-title .close",(function(){t.$button.click()})),this.$searchbox.on("click",(function(e){e.stopPropagation()})),this.$menu.on("click",".actions-btn",(function(i){t.options.liveSearch?t.$searchbox.focus():t.$button.focus(),i.preventDefault(),i.stopPropagation(),e(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll(),t.$element.change()})),this.$element.change((function(){t.render(!1)}))},liveSearchListener:function(){var t=this,i=e('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",(function(){t.$menuInner.find(".active").removeClass("active"),t.$searchbox.val()&&(t.$searchbox.val(""),t.$lis.not(".is-hidden").removeClass("hidden"),i.parent().length&&i.remove());try{t.$element.hasProp("dropupAuto")&&t.$newElement.addClass("dropup")}catch(i){var e=t.$element.attr("dropupAuto");e&&"true"==e&&t.$newElement.addClass("dropup")}var n=t.$menuInner.find(".selected");t.multiple||"1"==n.attr("data-original-index")||n.addClass("active"),setTimeout((function(){t.$searchbox.focus()}),10)})),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",(function(e){e.stopPropagation()})),this.$searchbox.on("input propertychange",(function(){if(t.$searchbox.val()){var n=t.$lis.not(".is-hidden").removeClass("hidden").children("a");(n=t.options.liveSearchNormalize?n.not(":a"+t._searchStyle()+"("+a(t.$searchbox.val())+")"):n.not(":"+t._searchStyle()+"("+t.$searchbox.val()+")")).parent().addClass("hidden"),t.$lis.filter(".dropdown-header").each((function(){var i=e(this),n=i.data("optgroup");0===t.$lis.filter("[data-optgroup="+n+"]").not(i).not(".hidden").length&&(i.addClass("hidden"),t.$lis.filter("[data-optgroup="+n+"div]").addClass("hidden"))}));var s=t.$lis.not(".hidden");s.each((function(t){var i=e(this);i.hasClass("divider")&&(i.index()===s.eq(0).index()||i.index()===s.last().index()||s.eq(t+1).hasClass("divider"))&&i.addClass("hidden")})),t.$lis.not(".hidden, .no-results").length?i.parent().length&&i.remove():(i.parent().length&&i.remove(),i.html(t.options.noneResultsText.replace("{0}",'"'+o(t.$searchbox.val())+'"')).show(),t.$menuInner.append(i))}else t.$lis.not(".is-hidden").removeClass("hidden"),i.parent().length&&i.remove();t.$lis.filter(".active").removeClass("active"),e(this).focus()}))},liveListener:function(){var e=this;this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",(function(){e.$menuInner.find(".active").removeClass("active");var t=e.$menuInner.find(".selected");try{e.$element.hasProp("dropupAuto")&&e.$newElement.addClass("dropup")}catch(t){var i=e.$element.attr("dropupAuto");i&&"true"==i&&e.$newElement.addClass("dropup")}e.multiple||t.addClass("active")}))},_searchStyle:function(){switch(this.options.liveSearchStyle){case"begins":case"startsWith":"ibegins"}return"icontains"},val:function(e){return void 0!==e?(this.$element.val(e),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis(),this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!0),this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").addClass("selected"),this.render(!1)},deselectAll:function(){this.findLis(),this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!1),this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").removeClass("selected"),this.render(!1)},keydown:function(t){var i,n,s,o,l,d,r,c,h,p=e(this),u=p.is("input")?p.parent().parent():p.parent(),m=u.data("this"),f=":not(.disabled, .hidden, .dropdown-header, .divider)",v={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(m.options.liveSearch&&(u=p.parent().parent()),m.options.container&&(u=m.$menu),i=e("[role=menu] li a",u),!(h=m.$menu.parent().hasClass("open"))&&(t.keyCode>=48&&t.keyCode<=57||event.keyCode>=65&&event.keyCode<=90)&&(m.options.container?m.$newElement.trigger("click"):(m.setSize(),m.$menu.parent().addClass("open"),h=!0),m.$searchbox.focus()),m.options.liveSearch&&(/(^9$|27)/.test(t.keyCode.toString(10))&&h&&0===m.$menu.find(".active").length&&(t.preventDefault(),m.$menu.parent().removeClass("open"),m.options.container&&m.$newElement.removeClass("open"),m.$button.focus()),i=e("[role=menu] li:not(.disabled, .hidden, .dropdown-header, .divider)",u),p.val()||/(38|40)/.test(t.keyCode.toString(10))||0===i.filter(".active").length&&(i=m.$newElement.find("li"),i=m.options.liveSearchNormalize?i.filter(":a"+m._searchStyle()+"("+a(v[t.keyCode])+")"):i.filter(":"+m._searchStyle()+"("+v[t.keyCode]+")"))),i.length){if(/(38|40)/.test(t.keyCode.toString(10)))n=i.index(i.filter(":focus")),o=i.parent(f).first().data("originalIndex"),l=i.parent(f).last().data("originalIndex"),s=i.eq(n).parent().nextAll(f).eq(0).data("originalIndex"),d=i.eq(n).parent().prevAll(f).eq(0).data("originalIndex"),r=i.eq(s).parent().prevAll(f).eq(0).data("originalIndex"),m.options.liveSearch&&(i.each((function(t){e(this).hasClass("disabled")||e(this).data("index",t)})),n=i.index(i.filter(".active")),o=i.first().data("index"),l=i.last().data("index"),s=i.eq(n).nextAll().eq(0).data("index"),d=i.eq(n).prevAll().eq(0).data("index"),r=i.eq(s).prevAll().eq(0).data("index")),c=p.data("prevIndex"),38==t.keyCode?(m.options.liveSearch&&(n-=1),n!=r&&n>d&&(n=d),n<o&&(n=o),n==c&&(n=l)):40==t.keyCode&&(m.options.liveSearch&&(n+=1),-1==n&&(n=0),n!=r&&n<s&&(n=s),n>l&&(n=l),n==c&&(n=o)),p.data("prevIndex",n),m.options.liveSearch?(t.preventDefault(),p.hasClass("dropdown-toggle")||(i.removeClass("active").eq(n).addClass("active").children("a").focus(),p.focus())):i.eq(n).focus();else if(!p.is("input")){var g,$=[];i.each((function(){e(this).parent().hasClass("disabled")||e.trim(e(this).text().toLowerCase()).substring(0,1)==v[t.keyCode]&&$.push(e(this).parent().index())})),g=e(document).data("keycount"),g++,e(document).data("keycount",g),e.trim(e(":focus").text().toLowerCase()).substring(0,1)!=v[t.keyCode]?(g=1,e(document).data("keycount",g)):g>=$.length&&(e(document).data("keycount",0),g>$.length&&(g=1)),i.eq($[g-1]).focus()}if((/(13|32)/.test(t.keyCode.toString(10))||/(^9$)/.test(t.keyCode.toString(10))&&m.options.selectOnTab)&&h){if(/(32)/.test(t.keyCode.toString(10))||t.preventDefault(),m.options.liveSearch)/(32)/.test(t.keyCode.toString(10))||(m.$menu.find(".active a").click(),p.focus());else{var b=e(":focus");b.click(),b.focus(),t.preventDefault(),e(document).data("spaceSelect",!0)}e(document).data("keycount",0)}(/(^9$|27)/.test(t.keyCode.toString(10))&&h&&(m.multiple||m.options.liveSearch)||/(27)/.test(t.keyCode.toString(10))&&!h)&&(m.$menu.parent().removeClass("open"),m.options.container&&m.$newElement.removeClass("open"),m.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.checkDisabled(),this.liHeight(!0),this.setStyle(),this.setWidth(),this.$lis&&this.$searchbox.trigger("propertychange"),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()}};var r=e.fn.selectpicker;e.fn.selectpicker=d,e.fn.selectpicker.Constructor=l,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=r,this},e(document).data("keycount",0).on("keydown",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',l.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',(function(e){e.stopPropagation()})),e(window).on("load.bs.select.data-api",(function(){e(".selectpicker:not(.milestoneId)").each((function(){var t=e(this);d.call(t,t.data())}))}))}(jQuery)}));