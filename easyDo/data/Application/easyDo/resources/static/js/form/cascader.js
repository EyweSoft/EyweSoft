!function(e){var s=27,n=37,t=38,i=39,a=40,o=13;function d(s,n){this.options=n,this.CLASS=d.CLASS,this.$el=e(s),this.$el_=this.$el.clone(),this.init()}d.CLASS={wrap:"zd-cascader-wrap",inputwrap:"zd-input zd-input--suffix",input:"zd-input__inner",iconWrap:"zd-input__suffix",iconInnerWrap:"zd-input__suffix-inner",icon:"icon zd-input__icon zd-icon-arrow-down",dropdownWrap:"zd-cascader__dropdown",dropdownPanel:"zd-cascader-panel",menuWrap:"zd-cascader-menu",menuList:"zd-cascader-menu__list",menuNode:"zd-cascader-node",menuNodeLabel:"zd-cascader-node__label",menuNodePostfix:"zd-cascader-node__postfix",checkClass:{wrapFocus:"is-focus",menuNodeSelected:"in-active-path",nodeSelectedIcon:"is-selected-icon",nodeAnchor:"is-prepare"}},d.DEFAULTS={data:null,range:" / ",value:null,onChange:function(e){}},d.METHODS=["reload","destroy"],d.levelValueArr=[],d.prototype.init=function(){this._construct(),this._event()},d.prototype._construct=function(){this.$container=this.$el.wrap(`<div class="${this.CLASS.wrap}"></div>`).wrap(`<div class="${this.CLASS.inputwrap}"></div>`).addClass(this.CLASS.input).prop("readonly",!0).closest("."+this.CLASS.wrap),this.$arrow=e('<span class="zd-input__suffix" style="width:100%;height:27px;cursor:text;">\n                                    <span class="zd-input__suffix-inner">\n                                        <svg t="1600158452164" class="icon zd-input__icon zd-icon-arrow-down" viewBox="0 0 1024 1024"\n                                            version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1181" style="width:100%;height:27px;">\n                                            <path p-id="1182" fill="#515151"></path>\n                                            <path p-id="1183" fill="#515151"></path>\n                                        </svg>\n                                    </span>\n                                </span>').insertAfter(this.$el),this.$dropdownWrap=e(`<div class="${this.CLASS.dropdownPanel}"></div>`).appendTo(this.$container).wrap(`<div class="${this.CLASS.dropdownWrap}"></div>`),this.reload()},d.prototype._event=function(){this.$container.on("click.wrap",e.proxy(this._wrapClick,this)),this.$container.on("mousedown",e.proxy((function(e){this.$el.focus(),e.stopPropagation()}),this)),e(document).on("mousedown.cascader",e.proxy((function(){this.$container.removeClass(this.CLASS.checkClass.wrapFocus)}),this)),this.$container.on("blur.wrap",e.proxy((function(){this.$container.removeClass(this.CLASS.checkClass.wrapFocus)}),this)),this.$container.on("click.item","."+this.CLASS.menuNode,e.proxy(this._nodeClick,this)),this.$el.on("keyup.wrap",e.proxy(this._keyup,this))},d.prototype._wrapClick=function(){event.stopPropagation();var s=this.$el,n=s.offset().top-e(document).scrollTop();e(window).height()-n-s.outerHeight()<400&&(this.$dropdownWrap.parent().hasClass("upward")||this.$dropdownWrap.parent().addClass("upward")),s.focus(),this.$container.hasClass(this.CLASS.checkClass.wrapFocus)||this.$container.addClass(this.CLASS.checkClass.wrapFocus),this.$dropdownWrap.find("li."+this.CLASS.checkClass.nodeAnchor).removeClass(this.CLASS.checkClass.nodeAnchor),this.$dropdownWrap.find(this.CLASS.menuList).eq(0).find("li."+this.CLASS.checkClass.menuNodeSelected).addClass(this.CLASS.checkClass.nodeAnchor)},d.prototype._nodeClick=function(s){var n=s.currentTarget?e(s.currentTarget):e(s),t=n.closest("."+this.CLASS.menuWrap);n.addClass(this.CLASS.checkClass.menuNodeSelected).siblings().removeClass(this.CLASS.checkClass.menuNodeSelected);var i=n.data("bindData");if(i.children)this._loadChildren(n);else{t.nextAll().remove();var a,o=t.prevAll(),d=i.label,c=i.value,h=this.$dropdownWrap.closest(".field-content"),r=[i];e.each(o,((s,n)=>{var t=e(n).find("li."+this.CLASS.checkClass.menuNodeSelected).data("bindData");d=t.label+this.options.range+d,a=t.value+this.options.range+c,r.push(t)})),this.$el.val(d).focus(),this.$container.removeClass(this.CLASS.checkClass.wrapFocus),h.find('input[attrsign="_ids"]').val(c),h.find('input[attrsign="_levelValue"]').val(a),this.$dropdownWrap.find("."+this.CLASS.checkClass.nodeSelectedIcon).remove(),n.prepend(e(`<span class="${this.CLASS.checkClass.nodeSelectedIcon} zmdi zmdi-check"></span>`)),this.$el.data("bindData",i),this.$el.data("bindPathData",r),this.options.onChange&&"function"==typeof this.options.onChange&&this.options.onChange(this,i,r),s.stopPropagation()}},d.prototype._loadChildren=function(s){this.$el.focus(),s.addClass(this.CLASS.checkClass.menuNodeSelected).siblings().removeClass(this.CLASS.checkClass.menuNodeSelected);var n=s.closest("."+this.CLASS.menuWrap),t=s.data("bindData");if(this.$dropdownWrap.find("li."+this.CLASS.checkClass.nodeAnchor).removeClass(this.CLASS.checkClass.nodeAnchor),s.addClass(this.CLASS.checkClass.nodeAnchor),t.children){var i=[],a=this.$el.data("bindPathData");a&&a.length>0&&(i=e.map(a,(e=>e.value)));var o=n.next();if(!o||0===o.length){var c=(o=(o=e(`<div class="zd-scrollbar ${this.CLASS.menuWrap}">\n                                        <div class="zd-cascader-menu__wrap zd-scrollbar__wrap">\n                                            <ul class="${this.CLASS.menuList}">\n                                            </ul>\n                                        </div>\n                                    </div>`)).appendTo(this.$dropdownWrap)).closest(".zd-cascader__dropdown");e(window).width()-c.offset().left-c.outerWidth()<0&&c.css({left:"auto",right:"0px"})}o.nextAll().remove();var h=o.find("."+this.CLASS.menuList).empty();e.each(t.children,((s,n)=>{var t=e(`<li class="${this.CLASS.menuNode}"></li>`),a=e(`<span class="${this.CLASS.menuNodeLabel}">${n.label}</span>`),o=e(`<svg t="1600158452164"\n                                        class="icon zd-input__icon zd-icon-arrow-right ${this.CLASS.menuNodePostfix}"\n                                        viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1181"\n                                        width="200" height="200">\n                                        <path\n                                            d="M538.434046 617.504916c0 3.687996-1.403976 7.356548-4.211928 10.1645-5.615904 5.615904-14.713097 5.615904-20.329001 0L364.187513 476.931297c-5.615904-5.615904-5.615904-14.713097 0-20.329001 5.615904-5.615904 14.713097-5.615904 20.329001 0l149.705604 150.739143C537.03007 610.148367 538.434046 613.817943 538.434046 617.504916z"\n                                            p-id="1182" fill="#515151"></path>\n                                        <path\n                                            d="M689.172165 466.767819c0 3.687996-1.403976 7.356548-4.211928 10.1645L534.222117 627.670439c-5.615904 5.615904-14.713097 5.615904-20.329001 0-5.615904-5.615904-5.615904-14.713097 0-20.329001L664.631236 456.603319c5.615904-5.615904 14.713097-5.615904 20.329001 0C687.768189 459.411271 689.172165 463.079824 689.172165 466.767819z"\n                                            p-id="1183" fill="#515151"></path>\n                                    </svg>`);t.append(a).data("bindData",n),n.children&&n.children.length>0?t.append(o):(i.indexOf(n.value)>=0||jQuery.inArray(n.value,d.levelValueArr)>-1)&&(this.$dropdownWrap.find("."+this.CLASS.checkClass.nodeSelectedIcon).remove(),t.addClass(this.CLASS.checkClass.menuNodeSelected).prepend(e(`<span class="${this.CLASS.checkClass.nodeSelectedIcon}">√</span>`))),t.appendTo(h)}))}else n.nextAll().remove()},d.prototype.destroy=function(){e(this.$el).insertAfter(this.$el_),this.$el.remove()},d.prototype.reload=function(s){s=s||this.options.data;var n=this.options.levelValue;n&&(d.levelValueArr=n.split(this.options.range)),this.$el.val(this.options.text).removeData("bindData").removeData("bindPathData"),this.$dropdownWrap.empty();var t=this.$el.data("bindData"),i=(this.options.value,e(`<div class="zd-scrollbar ${this.CLASS.menuWrap}">\n                                            <div class="zd-cascader-menu__wrap zd-scrollbar__wrap">\n                                                <ul class="${this.CLASS.menuList}">\n                                                </ul>\n                                            </div>\n                                        </div>`)),a=i.find("."+this.CLASS.menuList);e.each(s,((s,n)=>{var i="";i=n.value&&jQuery.inArray(n.value,d.levelValueArr)>-1?e(`<li class="${this.CLASS.menuNode} in-active-path"></li>`):e(`<li class="${this.CLASS.menuNode}"></li>`);var o=e(`<span class="${this.CLASS.menuNodeLabel}">${n.label}</span>`),c=e(`<svg t="1600158452164"\n                                        class="icon zd-input__icon zd-icon-arrow-right ${this.CLASS.menuNodePostfix}"\n                                        viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1181"\n                                        width="200" height="200">\n                                        <path\n                                            d="M538.434046 617.504916c0 3.687996-1.403976 7.356548-4.211928 10.1645-5.615904 5.615904-14.713097 5.615904-20.329001 0L364.187513 476.931297c-5.615904-5.615904-5.615904-14.713097 0-20.329001 5.615904-5.615904 14.713097-5.615904 20.329001 0l149.705604 150.739143C537.03007 610.148367 538.434046 613.817943 538.434046 617.504916z"\n                                            p-id="1182" fill="#515151"></path>\n                                        <path\n                                            d="M689.172165 466.767819c0 3.687996-1.403976 7.356548-4.211928 10.1645L534.222117 627.670439c-5.615904 5.615904-14.713097 5.615904-20.329001 0-5.615904-5.615904-5.615904-14.713097 0-20.329001L664.631236 456.603319c5.615904-5.615904 14.713097-5.615904 20.329001 0C687.768189 459.411271 689.172165 463.079824 689.172165 466.767819z"\n                                            p-id="1183" fill="#515151"></path>\n                                    </svg>`);i.append(o).data("bindData",n),n.children&&n.children.length>0?i.append(c):t&&n.value==t.value&&(this.$dropdownWrap.find("."+this.CLASS.checkClass.nodeSelectedIcon).remove(),i.prepend(e(`<span class="${this.CLASS.checkClass.nodeSelectedIcon}">√</span>`))),a.append(i)})),this.$dropdownWrap.find("li."+this.CLASS.checkClass.nodeAnchor).removeClass(this.CLASS.checkClass.nodeAnchor),this.$dropdownWrap.append(i).find(this.CLASS.menuNode).eq(0).focus().addClass(this.CLASS.checkClass.nodeAnchor)},d.prototype._keyup=function(e){switch(e.which){case a:this._movedown();break;case t:this._moveup();break;case n:this._moveleft();break;case i:this._moveright();break;case o:this._keyenter();break;case s:this._keyesc()}},d.prototype._movedown=function(){var e;this.$container.hasClass(this.CLASS.checkClass.wrapFocus)?(0===(e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor)).length?e=this.$dropdownWrap.find("."+this.CLASS.menuWrap).eq(0).find("."+this.CLASS.menuNode).eq(0).addClass(this.CLASS.checkClass.nodeAnchor):e.next().length>0&&(e=e.removeClass(this.CLASS.checkClass.nodeAnchor).next().addClass(this.CLASS.checkClass.nodeAnchor)),this._loadChildren(e)):this.$container.trigger("click")},d.prototype._moveup=function(){if(this.$container.hasClass(this.CLASS.checkClass.wrapFocus)){var e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor);0!==e.length&&(e.prev().length>0&&(e=e.removeClass(this.CLASS.checkClass.nodeAnchor).prev().addClass(this.CLASS.checkClass.nodeAnchor)),this._loadChildren(e))}},d.prototype._moveleft=function(){if(this.$container.hasClass(this.CLASS.checkClass.wrapFocus)){var e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor);if(0!==e.length){var s=e.closest("."+this.CLASS.menuWrap).prev();0!==s.length&&(e.removeClass(this.CLASS.checkClass.nodeAnchor),(e=s.find("li."+this.CLASS.checkClass.menuNodeSelected).length>0?s.find("li."+this.CLASS.checkClass.menuNodeSelected).eq(0):s.find("li"+this.CLASS.menuNode).eq(0)).addClass(this.CLASS.checkClass.nodeAnchor),this._loadChildren(e))}}},d.prototype._moveright=function(){if(this.$container.hasClass(this.CLASS.checkClass.wrapFocus)){var e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor);if(0!==e.length){var s=e.closest("."+this.CLASS.menuWrap).next();0!==s.length&&(e.removeClass(this.CLASS.checkClass.nodeAnchor),e=s.find("li."+this.CLASS.menuNode).eq(0).addClass(this.CLASS.checkClass.nodeAnchor),this._loadChildren(e))}}},d.prototype._keyenter=function(){if(this.$container.hasClass(this.CLASS.checkClass.wrapFocus)){var e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor);if(0!==e.length)0===e.closest("."+this.CLASS.menuWrap).next().length&&e.trigger("click")}},d.prototype._keyesc=function(){this.$container.hasClass(this.CLASS.checkClass.wrapFocus)&&(this.$container.removeClass(this.CLASS.checkClass.wrapFocus),this.$el.focus())},e.fn.zdCascader=function(s){var n,t=Array.prototype.slice.call(arguments,1);return this.each((function(){var i=e(this),a=i.data("zdCascader"),o=e.extend({},d.DEFAULTS,i.data(),"object"==typeof s&&s);if("string"==typeof s){if(e.inArray(s,d.METHODS)<0)throw new Error("Unknown method: "+s);if(!a)return;n=a[s].apply(a,t),"destroy"===s&&i.removeData("zdCascader")}a||i.data("zdCascader",a=new d(this,o))})),void 0===n?this:n}}(jQuery);