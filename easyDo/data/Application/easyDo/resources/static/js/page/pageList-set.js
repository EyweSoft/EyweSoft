$(document).ready((function(){var e=0;$(".btn-yulan").click((function(){0==e?($("#boxCenter").attr("class","col-sm-12"),$("#boxLeft").hide(),$(".tools").hide(),e++):($("#boxCenter").attr("class","col-sm-9"),$("#boxLeft").show(),$(".tools").show(),e=0)})),setup_draggable(),$("#copy-to-clipboard").on("click",(function(){var e=$(".form-body").clone().appendTo(document.body);e.find(".tools, :hidden").remove(),$.each(["draggable","droppable","sortable","dropped","ui-sortable","ui-draggable","ui-droppable","form-body"],(function(a,t){e.find("."+t).removeClass(t).removeAttr("style")}));var a=html_beautify(e.html());return e.remove(),$modal=get_modal(a,"cont").modal("show"),$modal.find(".btn").remove(),$modal.find(".modal-title").html("复制HTML代码"),$modal.find(":input:first").select().focus(),!1})),$(".btntext,.btntexts").click((function(){if(!$(this).hasClass("disabled")){$(this).addClass("disabled");var e=$(this).attr("htype"),a=$(tableList($(this)));a.appendTo($(".ui-sortable")),bindEvent(e,a),changeRowOddOrEven()}})),$(".btn-clear").click((function(){$("#colData").val(""),$("#grid-table").closest(".table-wrap").length&&document.querySelector("#grid-table").GM("destroy"),$(".draggable.disabled").removeClass("disabled").draggable("enable")}))}));var setup_draggable=function(){$(".draggable").draggable({appendTo:"body",helper:"clone"}),$(".droppable").droppable({accept:".draggable",helper:"clone",hoverClass:"droppable-active",drop:function(e,a){$(".empty-form").remove();var t=$(a.draggable);if(t.addClass("disabled"),$(a.draggable).hasClass("dropped")){if($(this)[0]!=t.parent()[0]){t.clone().appendTo(this);t.remove()}}else{t.attr("htype");tableList(t),setTimeout((function(){$(".draggable.disabled").draggable("disable"),changeRowOddOrEven()}),100)}}})};function bindEvent(e,a){}function tableList($obj,$field){var fieldId=$obj.attr("id"),text=$obj.attr("name"),thName=$obj.attr("field"),fieldType=$obj.attr("htype"),width=$obj.attr("displaywidth"),required=$obj.attr("isrequired"),colData=$("#colData").val(),search=!1,sorting=!1;colData=colData?eval("("+colData+")"):[],colData.push({fid:fieldId,key:thName,text:text,type:fieldType,width:width+"px",search:search,sorting:sorting,required:!(!required||"Y"!=required)&&"true"}),initOrReloadTable(colData)}var get_modal=function(e,a,t){return"cont"==a?$('<div class="modal" style="overflow: auto;" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><a type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</a><h4 class="modal-title">表单信息设置</h4></div><div class="modal-body ui-front"><xmp class="form-control"  style="min-height: 200px; overflow-y: auto; margin-bottom: 10px;font-family: Monaco, Fixed">'+e+'</xmp><button class="btn btn-success">确认</button></div></div></div></div>').appendTo(document.body):$('<div class="modal" style="overflow: auto;" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><a type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</a><h4 class="modal-title">表单信息设置</h4></div><div class="modal-body ui-front">'+tabUp(a,t)+'<xmp class="form-control"  style="min-height: 200px; display:none; overflow-y: auto; margin-bottom: 10px;font-family: Monaco, Fixed">'+e+'</xmp><button class="btn btn-success">确认</button></div></div></div></div>').appendTo(document.body)};function changeRowOddOrEven(){var e,a="even",t=0,o=0,d=1,l="";$fieldList=$(".form-box .field-li"),$fieldList.removeClass("even, odd"),$fieldList.each((function(i){l=$(this).attr("htype"),e=$(this).attr("isread"),d=$(this).hasClass("content-whole")?2:1,("GROUP"==l||"SIGN"==l||o+d>2)&&(a="even",o=0,t++),t%2==1&&"Y"==e?a="odd":"Y"!=e&&(a="even"),"GROUP"!=l&&"SIGN"!=l&&$(this).addClass(a),o+=d}))}