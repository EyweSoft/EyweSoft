$(document).ready((function(){var t=0;$(".btn-yulan").click((function(){0==t?($("#boxCenter").attr("class","col-sm-12"),$("#boxLeft").hide(),$(".tools").hide(),t++):($("#boxCenter").attr("class","col-sm-9"),$("#boxLeft").show(),$(".tools").show(),t=0)})),setup_draggable(),$("#copy-to-clipboard").on("click",(function(){var t=$(".form-body").clone().appendTo(document.body);t.find(".tools, :hidden").remove(),$.each(["draggable","droppable","sortable","dropped","ui-sortable","ui-draggable","ui-droppable","form-body"],(function(e,a){t.find("."+a).removeClass(a).removeAttr("style")}));var e=html_beautify(t.html());return t.remove(),$modal=get_modal(e,"cont").modal("show"),$modal.find(".btn").remove(),$modal.find(".modal-title").html("复制HTML代码"),$modal.find(":input:first").select().focus(),!1})),$(".btntext,.btntexts").click((function(){if(!$(this).hasClass("disabled")){$(this).addClass("disabled");var t=$(this).attr("htype"),e=$(this).attr("field");$(tableList($(this))).appendTo($("#boxCenter .page-ul.ui-sortable")),setTimeout((function(){bindEvent(t,$('.field-li[field="'+e+'"]'))}),100),changeRowOddOrEven()}})),$(".btn-clear").click((function(){$(".ibox-content .page-ul").find('.form-group[field!="report_report_sign"][field!="detail_sign"][field!="report_audit_sign"]').remove(),$('.draggable.disabled[field!="report_report_sign"][field!="detail_sign"][field!="report_audit_sign"]').removeClass("disabled").draggable("enable"),$("#owerFieldIds, #actorFieldIds, #readerFieldIds").val("")})),$(".item-box").each((function(){$(this).find(".btntexts").length||$(this).hide()}))}));var setup_draggable=function(){$(".draggable").draggable({appendTo:"body",helper:"clone"}),$(".droppable").droppable({accept:".draggable",helper:"clone",hoverClass:"droppable-active",drop:function(t,e){$(".empty-form").remove();var a=$(e.draggable);if(a.addClass("disabled"),$(e.draggable).hasClass("dropped")){if($(this)[0]!=a.parent()[0]){a.clone().appendTo(this);a.remove()}setTimeout((function(){changeRowOddOrEven()}),100)}else{var l=a.attr("htype"),n=$(tableList(a));n.appendTo(this),bindEvent(l,n),setTimeout((function(){$(".draggable.disabled").draggable("disable"),changeRowOddOrEven()}),100)}}}).sortable()};function bindEvent(t,e){"TEXT"==t||"AREA"==t?e.find(".wordSumTotal").textSum():"SELECT"==t?e.find(".selectpicker").selectpicker("refresh"):"FORMATAREA"==t&&loadSummernote(!0),e.find(".setParam span").click((function(){var t=$(this).attr("value"),e=$(this).closest(".setParam"),a=$(this).closest(".field-li"),l=a.attr("htype"),n="";if(n="RADIO"==l||"CHECKBOX"==l?a.find(".field-content-check"):"NUMBER"==l?a.find(".field-content-num"):"SIGN"==l?a.find(".field-sign-content"):a.find(".field-content"),"I"==t||"O"==t||"R"==t){e.find(".I,.O,.R").removeClass("cur"),$(this).addClass("cur");var i="N";"I"==t?(a.find(".requireSign").text("*"),n.attr({isrequired:"Y",isReaded:"N"})):"O"==t?(a.find(".requireSign").text(""),n.attr({isrequired:"N",isReaded:"N"})):(i="Y",a.find(".requireSign").text(""),n.attr({isrequired:"N",isReaded:"Y"})),a.attr("isRead",i),changeHtmlContent(a,n,l,i),changeRowOddOrEven()}else if("T"==t||"F"==t||"D"==t){if("T"==t||"F"==t)e.find(".T,.F").removeClass("cur"),$(this).addClass("cur"),"T"==t?a.removeClass("content-whole"):a.addClass("content-whole"),n.attr("layout",t);else{var d=a.attr("field");$(".item-box").find('.btntexts[field="'+d+'"]').removeClass("disabled").draggable("enable");var r=a.attr("id");if("USER"==l){var s=$("#owerFieldIds").val(),o=$("#actorFieldIds").val(),c=$("#readerFieldIds").val();s&&s.indexOf(r)>-1&&(s=s.replaceAll(r,""),$("#owerFieldIds").val(s)),o&&o.indexOf(r)>-1&&(o=o.replaceAll(r,""),$("#actorFieldIds").val(o)),c&&c.indexOf(r)>-1&&(c=c.replaceAll(r,""),$("#readerFieldIds").val(c))}a.remove()}changeRowOddOrEven()}else if("OR"==t||"AC"==t||"RR"==t){r=a.attr("id");var u=$("#owerFieldIds"),p=$("#actorFieldIds"),v=$("#readerFieldIds");s=u.val(),o=p.val(),c=v.val();if($(this).hasClass("cur"))return"OR"==t?s&&u.val(s.replaceAll(r,"")):"AC"==t?o&&p.val(o.replaceAll(r,"")):"RR"==t&&c&&v.val(c.replaceAll(r,"")),$(this).removeClass("cur"),void a.find(".roleType").text("");e.find(".OR,.AC,.RR").removeClass("cur"),$(this).addClass("cur"),"OR"==t?(a.find(".roleType").text("( 责任人 )"),s&&s.indexOf(r)<0?s+=","+r:s||(s=r),u.val(s),o&&o.indexOf(r)>-1&&(o=o.replaceAll(r,""),p.val(o)),c&&c.indexOf(r)>-1&&(c=c.replaceAll(r,""),v.val(c))):"AC"==t?(a.find(".roleType").text("( 参与人 )"),o&&o.indexOf(r)<0?o+=","+r:o||(o=r),p.val(o),s&&s.indexOf(r)>-1&&(s=s.replaceAll(r,""),u.val(s)),c&&c.indexOf(r)>-1&&(c=c.replaceAll(r,""),v.val(c))):"RR"==t&&(a.find(".roleType").text("( 读者 )"),c&&c.indexOf(r)<0?c+=","+r:c||(c=r),v.val(c),s&&s.indexOf(r)>-1&&(s=s.replaceAll(r,""),u.val(s)),o&&o.indexOf(r)>-1&&(o=o.replaceAll(r,""),p.val(o)))}}))}function changeHtmlContent($parentLi,$fieldContent,htype,isRead){var value=$fieldContent.attr("value"),field=$parentLi.attr("field"),name=$fieldContent.attr("name"),textLength=$fieldContent.attr("textLength"),rows=$fieldContent.attr("rows");if("Y"==isRead)if("TEXT"==htype||"AREA"==htype||"SELECT"==htype||"RADIO"==htype||"CHECKBOX"==htype||"DATE"==htype||"FORMATAREA"==htype||"PJT"==htype||"PRD"==htype||"DEPT"==htype||"SECTION"==htype)$parentLi.addClass("r"),$fieldContent.html("");else if("USER"==htype)$fieldContent.find(".user-add").hide();else if("NUMBER"==htype){$parentLi.addClass("r");var trData=$('.btntexts[field="'+field+'"]').attr("defaultjson"),content="";trData&&(trData=eval("("+trData+")"),"I"==trData.f?content+='\t<div class="c-text mr5"><i class="zmdi zmdi-lamp fz22 mr5 green-light"></i></div>':content+='\t<span class="numValue mr5">'+(trData.v?trData.v:0)+"</span>"+(trData.unitName?trData.unitName:"")),$fieldContent.html(content)}else"SIGN"==htype&&$fieldContent.find('button[type="button"]').hide();else if($parentLi.removeClass("r"),"TEXT"==htype||"AREA"==htype){if($fieldContent.addClass("textWrap, wordSumTotal"),"TEXT"==htype)$fieldContent.html('<input class="form-control" name="'+field+'" type="text" value="'+value+'" placeholder="请输入'+name+'" autocomplete="off"  htype="TEXT" maxlength="'+textLength+'">');else{var content="";content+='\t<div class="textarea-box">',content+='\t\t<textarea class="input_textarea" maxlength="'+textLength+'" name="'+field+'" placeholder="请输入'+name+'" rows="'+rows+'" readOnly></textarea>',content+="\t</div>",$fieldContent.html(content)}$fieldContent.textSum()}else if("USER"==htype)$fieldContent.find(".user-add").show();else if("SELECT"==htype)$fieldContent.html('<select class="selectpicker" data-live-search="true" data-live-search-style="begins" title="请选择" disabled></select>'),$fieldContent.find(".selectpicker").selectpicker("refresh");else if("RADIO"==htype||"CHECKBOX"==htype){var trData=$('.btntexts[field="'+field+'"]').attr("defaultjson");if(trData){trData=eval("("+trData+")");var sv=trData.sv,content="";if(sv){sv=eval("("+sv+")");for(var j=0;j<sv.length;j++)"RADIO"==htype?(content+='<div class="radio">',content+='\t<input type="radio" name="'+trData.cl+'" id="_'+(trData.cl+j)+'" value="'+sv[j].id+'" data-target="radio" disabled>',content+='\t<label for="_'+(trData.cl+j)+'">'+sv[j].text+"</label>",content+="</div>"):(content+='<div class="checkbox">',content+='\t<input type="checkbox" name="'+trData.cl+'" id="_'+(trData.cl+j)+'" value="'+sv[j].id+'" data-target="checkbox" disabled>',content+='\t<label for="_'+(trData.cl+j)+'">'+sv[j].text+"</label>",content+="</div>")}$fieldContent.html(content)}}else if("DATE"==htype){var content="";content+='<input class="form-control form-control-date" name="'+field+'" type="text" value="" placeholder="请选择'+name+'" placeholder=" " autocomplete="off" readonly="readonly" htype="DATE">',content+='<i class="zmdi zmdi-calendar"></i>',$fieldContent.html(content)}else if("NUMBER"==htype){var trData=$('.btntexts[field="'+field+'"]').attr("defaultjson"),content="";trData&&(trData=eval("("+trData+")"),"report_rate"==trData.cl&&$("#curRate").val()&&!trData.v?("100"==$("#curRate").val()&&(trData.v=100),content+='\t\t<input type="number" name="'+trData.cl+'" id="'+trData.cl+'" class="num-input" value="" placeholder="'+$("#curRate").val()+'" max="'+trData.max+'" min="'+trData.min+'" deci="'+trData.deci+'" '+("Y"==trData.r?"required":"")+' autocomplete="off" readonly/>'):"confirm_rate"==trData.cl?content+='\t\t<input type="number" name="'+trData.cl+'" id="'+trData.cl+'" class="num-input" value="" placeholder="请输入确认完成率" max="'+trData.max+'" min="'+trData.min+'" deci="'+trData.deci+'" autocomplete="off" readonly/>':content+='\t\t<input type="number" name="'+trData.cl+'" id="'+trData.cl+'" class="num-input" value="" placeholder="请输入'+trData.n+'" max="'+trData.max+'" min="'+trData.min+'" deci="'+trData.deci+'" '+("Y"==trData.r?"required":"")+' autocomplete="off" readonly/>',content+='\t\t<div class="sumtips">'+(trData.unitName?trData.unitName:"")+"</div>","report_in_work"==trData.cl&&(content+='\t\t<div class="day-hour">当日已登记工时:<span class="curHour mr5 ml5">0</span>小时</div>')),$fieldContent.html(content)}else if("FORMATAREA"==htype){var trData=$('.btntexts[field="'+field+'"]').attr("defaultjson"),content="";trData&&(trData=eval("("+trData+")"),content+='\t<input type="hidden" name="'+trData.cl+'" htype="FORMATAREA" value=""/>',content+='\t<div class="summernote"></div>'),$fieldContent.html(content),loadSummernote(!0)}else if("PJT"==htype||"PRD"==htype||"DEPT"==htype){var trData=$('.btntexts[field="'+field+'"]').attr("defaultjson"),content="";trData&&(content+='\t\t<input type="hidden" id="_'+trData.cl+'" name="'+trData.cl+'" value="'+trData.v+'"'+("Y"==trData.r?"required":"")+" >",content+='\t\t<input class="form-control form-control-popup" name="'+trData.cl+'Name" type="text" value="" placeholder="请选择'+name+'" placeholder=" " autocomplete="off" readonly="readonly" htype="'+htype+'" '+("Y"==trData.r?"required":"")+" >",content+='\t\t<i class="zmdi zmdi-search"></i>'),$fieldContent.html(content)}else if("SECTION"==htype){var content="";"milestoneId"==field&&(content+='<div class="lcs_wrap">',content+='\t<input class="lcs_check lcs_tt1" name="isWorkLog" type="checkbox" autocomplete="否" checked="checked" value="N">',content+='\t<div class="lcs_switch lcs_checkbox_switch lcs_off">',content+='\t\t<div class="lcs_cursor"></div>',content+='\t\t<div class="lcs_label lcs_label_on">是</div>',content+='\t\t<div class="lcs_label lcs_label_off">否</div>',content+="\t</div>",content+="</div>"),$fieldContent.html(content)}else"SIGN"==htype&&$fieldContent.find('button[type="button"]').show()}function tableList($obj,$field){var content="",id="",htype="",name="",value="",field="",layout="",isrequired="",displaywidth="",textLength="",isRead="N",isOnlyRead="",trData="";$obj?(id=$obj.attr("id"),htype=$obj.attr("htype"),name=$obj.attr("name"),value=$obj.attr("value"),field=$obj.attr("field"),layout=$obj.attr("layout"),isrequired=$obj.attr("isrequired"),displaywidth=$obj.attr("displaywidth"),textLength=$obj.attr("textLength"),isOnlyRead=$obj.attr("isOnlyRead"),trData=$obj.attr("defaultJson"),trData&&(trData=eval("("+trData+")"))):$field&&(id=$field.id,htype=$field.htmlType,name=$field.showName,field=$field.colName,trData=$field.defaultJson,trData&&(trData=eval("("+trData+")")),layout=trData&&trData.hasOwnProperty("l")&&trData.l?trData.l:$field.layout,isrequired=trData.r?trData.r:$field.isRequired,textLength=trData.tl?trData.tl:$field.textLength,isOnlyRead=$field.isOnlyRead,isRead=trData.ro?trData.ro:$field.isReaded);var isAllOnlyRead=$("#isAllOnlyRead").val();isAllOnlyRead&&"Y"==isAllOnlyRead&&(isOnlyRead="Y");var paramType="";switch("Y"==isOnlyRead||"Y"==isRead?(paramType="R",isRead="Y"):paramType="Y"==isrequired?"I":"O",content+='<li class="form-group draggable ui-draggable dropped field-li '+("F"==layout?"content-whole":"")+("Y"==isRead&&"USER"!=htype?" r":"")+'" id="'+id+'" field="'+field+'" htype="'+htype+'" isRead="'+isRead+'">',"SIGN"!=htype&&"GROUP"!=htype&&(content+='\t<div class="field-div field-label"><span class="requireSign">'+("Y"==isrequired&&"Y"!=isRead?"*":"")+'</span><span class="title">'+name+("USER"==htype?'<div class="roleType"></div>':"")+"</span></div>"),htype){case"TEXT":content+='\t<div class="content-sign field-div field-content '+("Y"==isRead?"":" textWrap wordSumTotal")+'" value="" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+trData.tl+'" isreaded="'+isRead+'">',content+="Y"==isRead?value:'\t<input class="form-control" name="'+field+'" type="text" value="" placeholder="请输入'+name+'" autocomplete="off"  htype="TEXT" maxlength="'+textLength+'" readOnly>',content+="\t</div>";break;case"USER":content+='\t<div class="content-sign field-div field-content user" value="'+value+'" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+textLength+'" isreaded="'+isRead+'">',content+='\t\t<div class="user-list"></div>',"Y"!=isRead&&(content+='\t<div class="user-add">',content+='\t\t<div class="cp form-control-popup" htype="USER" ><img src="/img/user/user-add.png"/></div>',content+='\t\t<div class="cp" onclick="preRemoveUser($(this))"><img src="/img/user/user-del.png"/></div>',content+="\t</div>"),content+="\t</div>";break;case"SELECT":content+='\t<div class="content-sign field-div field-content Sign" value="'+value+'" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+textLength+'" isreaded="'+isRead+'">',content+="Y"==isRead?"":'\t<select class="selectpicker" data-live-search="true" data-live-search-style="begins" title="请选择" disabled></select>',content+="\t</div>";break;case"RADIO":if(content+='\t<div class="content-sign field-div field-content-check" value="'+value+'" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+textLength+'" isreaded="'+isRead+'">',"Y"==isRead)content+="";else{var sv=trData.sv;if(sv){sv=eval("("+sv+")");for(var j=0;j<sv.length;j++)content+='<div class="radio">',content+='\t<input type="radio" name="'+trData.cl+'" id="_'+(trData.cl+j)+'" value="'+sv[j].id+'" data-target="radio" disabled>',content+='\t<label for="_'+(trData.cl+j)+'">'+sv[j].name+"</label>",content+="</div>"}}content+="\t</div>";break;case"CHECKBOX":if(content+='\t<div class="content-sign field-div field-content-check" value="'+value+'" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+textLength+'" isreaded="'+isRead+'">',"Y"==isRead)content+="";else{var sv=trData.sv;if(sv){sv=eval("("+sv+")");for(var j=0;j<sv.length;j++)content+='<div class="checkbox">',content+='\t<input type="checkbox" name="'+trData.cl+'" id="_'+(trData.cl+j)+'" value="'+sv[j].id+'" data-target="checkbox" disabled>',content+='\t<label for="_'+(trData.cl+j)+'">'+sv[j].name+"</label>",content+="</div>"}}content+="\t</div>";break;case"DATE":content+='\t<div class="content-sign field-div field-content" value="'+value+'" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+textLength+'" isreaded="'+isRead+'">',"Y"==isRead?content+="":(content+='\t\t<input class="form-control form-control-date" name="" type="text" value="" placeholder="请选择'+name+'" placeholder=" " autocomplete="off" readonly="readonly" htype="DATE">',content+='\t\t<i class="zmdi zmdi-calendar"></i>'),content+="\t</div>";break;case"NUMBER":if("Y"==isRead)if("I"==trData.f&&trData.v&&(trData.green||trData.red)){var curValue=Number(trData.v),greenValue=Number(trData.green),redValue=Number(trData.red),lightType="green";curValue<=greenValue?lightType="green":curValue>greenValue&&(curValue<=redValue||0==redValue)?lightType="yellow":curValue>redValue&&(lightType="red"),content+='\t<div class="content-sign field-div field-content" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+textLength+'" isreaded="'+isRead+'"><div class="c-text mr5"><i class="zmdi zmdi-lamp fz22 mr5 '+lightType+'-light"></i></div></div>'}else content+='\t<div class="content-sign field-div field-content-num" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+textLength+'" isreaded="'+isRead+'"><span class="numValue mr5">'+(trData.v?trData.v:0)+"</span>"+(trData.unitName?trData.unitName:"")+"</div>";else content+='\t<div class="content-sign field-div field-content-num" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+textLength+'" isreaded="'+isRead+'">',"report_rate"==trData.cl&&$("#curRate").val()&&!trData.v?("100"==$("#curRate").val()&&(trData.v=100),content+='\t\t<input type="number" name="'+trData.cl+'" id="'+trData.cl+'" class="num-input" value="" placeholder="'+$("#curRate").val()+'" max="'+trData.max+'" min="'+trData.min+'" deci="'+trData.deci+'" '+("Y"==trData.r?"required":"")+' autocomplete="off" readonly/>'):"confirm_rate"==trData.cl?content+='\t\t<input type="number" name="'+trData.cl+'" id="'+trData.cl+'" class="num-input" value="" placeholder="请输入确认完成率" max="'+trData.max+'" min="'+trData.min+'" deci="'+trData.deci+'" autocomplete="off" readonly/>':content+='\t\t<input type="number" name="'+trData.cl+'" id="'+trData.cl+'" class="num-input" value="" placeholder="请输入'+trData.n+'" max="'+trData.max+'" min="'+trData.min+'" deci="'+trData.deci+'" '+("Y"==trData.r?"required":"")+' autocomplete="off" readonly/>',content+='\t\t<div class="sumtips">'+(trData.unitName?trData.unitName:"")+"</div>","report_in_work"==trData.cl&&(content+='\t\t<div class="day-hour">当日已登记工时:<span class="curHour mr5 ml5">0</span>小时</div>'),content+="\t</div>";break;case"AREA":content+='\t<div class="content-sign field-div field-content'+("Y"==isRead?"":" textWrap wordSumTotal")+'" value="'+value+'" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+trData.tl+'" rows="'+trData.ar+'" isreaded="'+isRead+'">',"Y"==isRead?content+="":(content+='\t<div class="textarea-box">',content+='\t\t<textarea class="input_textarea" maxlength="'+trData.tl+'" name="'+trData.cl+'" placeholder="请输入'+trData.n+'" rows="'+trData.ar+'" '+("Y"==trData.r?"required":"")+" readOnly>"+trData.v+"</textarea>",content+="\t</div>"),content+="\t</div>";break;case"FORMATAREA":content+='\t<div class="content-sign field-div field-content field-content-summernote" value="'+value+'" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+trData.tl+'" isreaded="'+isRead+'">',"Y"==isRead?content+="":(content+='\t\t<input type="hidden" name="'+trData.cl+'" htype="FORMATAREA" value=""/>',content+='\t\t<div class="summernote"></div>'),content+="\t</div>";break;case"PJT":content+='\t<div class="content-sign field-div field-content" value="'+value+'" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+trData.tl+'" isreaded="'+isRead+'">',"Y"==isRead?content+="":(content+='\t\t<input type="hidden" id="_'+trData.cl+'" name="'+trData.cl+'" value="'+trData.v+'"'+("Y"==trData.r?"required":"")+" >",content+='\t\t<input class="form-control form-control-popup" name="'+trData.cl+'Name" type="text" value="" placeholder="请选择'+trData.n+'" placeholder=" " autocomplete="off" readonly="readonly" htype="PJT" '+("Y"==trData.r?"required":"")+" >",content+='\t\t<i class="zmdi zmdi-search"></i>'),content+="</div>";break;case"PRD":content+='\t<div class="content-sign field-div field-content" value="'+value+'" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+trData.tl+'" isreaded="'+isRead+'">',"Y"==isRead?content+="":(content+='\t\t<input type="hidden" id="_'+trData.cl+'" name="'+trData.cl+'" value="'+trData.v+'"'+("Y"==trData.r?"required":"")+" >",content+='\t\t<input class="form-control form-control-popup" name="'+trData.cl+'Name" type="text" value="" placeholder="请选择'+trData.n+'" placeholder=" " autocomplete="off" readonly="readonly" htype="PRD" '+("Y"==trData.r?"required":"")+" >",content+='\t\t<i class="zmdi zmdi-search"></i>'),content+="</div>";break;case"DEPT":content+='\t<div class="content-sign field-div field-content" value="'+value+'" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+trData.tl+'" isreaded="'+isRead+'">',"Y"==isRead?content+="":(content+='\t\t<input type="hidden" id="_'+trData.cl+'" name="'+trData.cl+'" value="'+trData.v+'"'+("Y"==trData.r?"required":"")+" >",content+='\t\t<input class="form-control form-control-popup" name="'+trData.cl+'Name" type="text" value="" placeholder="请选择'+trData.n+'" placeholder=" " autocomplete="off" readonly="readonly" htype="DEPT" '+("Y"==trData.r?"required":"")+" >",content+='\t\t<i class="zmdi zmdi-search"></i>'),content+="</div>";break;case"SIGN":trData.bg||(trData.bg="var(--theme)"),trData.f&&"JJ"!=trData.f?"ZT"==trData.f?(content+='\t<div class="field-div field-sign-title2 mt10" style="border-bottom:1px solid '+trData.bg+'">',content+='\t\t<div class="title-box" style="background-color:'+trData.bg+'">',content+='\t\t\t<div class="title show-name" style="color:'+trData.fc+'">'+trData.t+"</div>",content+='\t\t\t<div class="square"></div>',content+="\t\t</div>",content+="\t</div>"):"CT"==trData.f?content+='\t<div class="field-div field-sign-title1 show-name mt10" style="border-left:10px solid '+trData.bg+'" >'+trData.t+"</div>":"BZ"==trData.f?(content+='\t<div class="field-div field-sign-title4 remark-content mt10" style="background-color:'+("var(--theme)"==trData.bg?"#fff":trData.bg)+";color:"+("var(--font-color)"==trData.fc?"#555":trData.fc)+'">',content+='\t\t<div class="tip-title mb10" style="color:'+("var(--font-color)"==trData.fc?"#555":trData.fc)+'" ><i class="fa fa-info-circle mr10 fz20"></i><span class="fz16 show-name">'+trData.t+"</span></div>",content+='\t\t<div class="tip-content">'+trData.tp+"</div>",content+="\t</div>"):"ZDY"==trData.f&&(content+='\t<div class="field-div field-sign-title3" style="color:'+trData.bg+";border-bottom:1px solid "+trData.bg+'">',content+='\t\t<i class="zmdi zmdi-hdr-strong mr10"></i>',content+='\t\t<div class="title show-name"><span class="requireSign">'+("Y"==isrequired&&"Y"!=isRead?"*":"")+"</span>"+trData.t+"</div>",content+="\t</div>"):(content+='\t<div class="field-div field-sign-title3" style="color:'+trData.bg+";border-bottom:1px solid "+trData.bg+'">',content+='\t\t<i class="zmdi zmdi-hdr-strong mr10"></i>',content+='\t\t<div class="title show-name">'+trData.t+"</div>",content+="\t</div>"),content+='\t<div class="content-sign field-div field-sign-content mt10" value="'+value+'" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+trData.tl+'" isreaded="'+isRead+'">',content+="\t</div>";break;case"GROUP":content+='\t<div class="field-div field-sign-title3 mb10" style="color:'+trData.bg+";border-bottom:1px solid "+trData.fc+'">',content+='\t\t<i class="zmdi zmdi-hdr-strong mr10"></i>',content+='\t\t<div class="title show-name">'+trData.t+"</div>",content+="\t</div>";break;case"SECTION":content+='\t<div class="content-sign field-div field-content" value="'+value+'" name="'+name+'" layout="'+layout+'" isrequired="'+isrequired+'" displaywidth="'+displaywidth+'" textLength="'+trData.tl+'" isreaded="'+isRead+'">',"Y"==isRead?content+="":"milestoneId"==trData.cl&&(content+='<div class="lcs_wrap">',content+='\t<input class="lcs_check lcs_tt1" name="isWorkLog" type="checkbox" autocomplete="否" checked="checked" value="N">',content+='\t<div class="lcs_switch lcs_checkbox_switch lcs_off">',content+='\t\t<div class="lcs_cursor"></div>',content+='\t\t<div class="lcs_label lcs_label_on">是</div>',content+='\t\t<div class="lcs_label lcs_label_off">否</div>',content+="\t</div>",content+="</div>"),content+="</div>"}return content+='\t<div class="setParam">',"Y"==isOnlyRead?("FORMATAREA"!=htype&&"SIGN"!=htype&&"GROUP"!=htype&&(content+='\t<span class="T ml5 '+("T"==layout?"cur":"")+'" value="T">半行</span><span class="F '+("F"==layout?"cur":"")+'" value="F">一行</span>'),"detail_sign"!=field&&"report_report_sign"!=field&&"report_audit_sign"!=field&&(content+='\t<span class="D one" value="D">删除</span>')):(("SIGN"!=htype||"SIGN"==htype&&"ZDY"==trData.f)&&(content+='\t<span class="I '+("I"==paramType?"cur":"")+'" value="I">必填</span><span class="O '+("O"==paramType?"cur":"")+'" value="O">选填</span><span class="R '+("R"==paramType?"cur":"")+'" value="R">只读</span>'),"FORMATAREA"!=htype&&"SIGN"!=htype&&"GROUP"!=htype&&(content+='\t<span class="T ml5 '+("T"==layout?"cur":"")+'" value="T">半行</span><span class="F '+("F"==layout?"cur":"")+'" value="F">一行</span>'),"detail_sign"!=field&&"report_report_sign"!=field&&"report_audit_sign"!=field&&(content+='\t<span class="D" value="D">删除</span>')),"USER"==htype&&(content+='\t<div class="roleParam">',content+='\t<span class="OR" value="OR">责任人</span><span class="AC" value="AC">参与人</span><span class="RR" value="RR">读者</span>',content+="\t</div>"),content+="\t</div>",content+="</li>",content}var get_modal=function(t,e,a){return"cont"==e?$('<div class="modal" style="overflow: auto;" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><a type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</a><h4 class="modal-title">表单信息设置</h4></div><div class="modal-body ui-front"><xmp class="form-control"  style="min-height: 200px; overflow-y: auto; margin-bottom: 10px;font-family: Monaco, Fixed">'+t+'</xmp><button class="btn btn-success">确认</button></div></div></div></div>').appendTo(document.body):$('<div class="modal" style="overflow: auto;" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><a type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</a><h4 class="modal-title">表单信息设置</h4></div><div class="modal-body ui-front">'+tabUp(e,a)+'<xmp class="form-control"  style="min-height: 200px; display:none; overflow-y: auto; margin-bottom: 10px;font-family: Monaco, Fixed">'+t+'</xmp><button class="btn btn-success">确认</button></div></div></div></div>').appendTo(document.body)};function changeRowOddOrEven(){var t,e="even",a=0,l=0,n=1,i="";$fieldList=$(".form-box .field-li"),$fieldList.removeClass("even, odd"),$fieldList.each((function(d){i=$(this).attr("htype"),t=$(this).attr("isread"),n=$(this).hasClass("content-whole")?2:1,("GROUP"==i||"SIGN"==i||l+n>2)&&(e="even",l=0,a++),a%2==1&&"Y"==t?e="odd":"Y"!=t&&(e="even"),"GROUP"!=i&&"SIGN"!=i&&$(this).addClass(e),l+=n}))}function loadPage(t,e){t?$.ajax({cache:!0,type:"POST",url:"/page/getRefPageFieldList",data:{pageId:t,objectType:$("#objectType").val(),isAllOnlyRead:e},async:!1,success:function(e){pagePageRightPage(e,t)}}):$(".btn-clear").click()}function pagePageRightPage(t,e){if(t){var a="",l=$(".form-box");l.html(""),$(".draggable.disabled").removeClass("disabled").draggable("enable");for(var n=0;n<t.length;n++)(a=$(tableList("",t[n]))).appendTo(l),bindEvent(t[n].htmlType,a),$('.btntexts[field="'+t[n].colName+'"]').addClass("disabled");setTimeout((function(){$(".draggable.disabled").draggable("disable")}),100),changeRowOddOrEven();var i=$("#isSaveTranOrNodePage").val(),d=$("#isAllOnlyRead").val();!i||"Y"!=i||d&&"N"!=d||$.ajax({cache:!0,type:"POST",url:"/page/getRefPageRoleList",data:{pageId:e,objectType:$("#objectType").val()},async:!1,success:function(t){if(t){for(var e,a,l,n,i="",d="",r="",s=0;s<t.length;s++)a=t[s][1],l=t[s][2],e=t[s][3],(n=$('.form-group[id="'+e+'"]')).find(".roleType").text("( "+a+" )"),n.find("."+l).addClass("cur"),"OR"==l?i?i+=","+e:i=e:"AC"==l?d?d+=","+e:d=e:"RR"==l&&(r?r+=","+e:r=e);$("#owerFieldIds").val(i),$("#actorFieldIds").val(d),$("#readerFieldIds").val(r)}}})}}function packPageFieldParams(t){var e,a,l,n,i,d=[];if(t.each((function(){e=$(this).find(".content-sign"),a=$(this).attr("id"),l=e.attr("isrequired"),n=e.attr("isreaded"),"Y",i=e.attr("layout"),d.push({i:a,r:l,ro:n,s:"Y",l:i,v:""})})),d.length){var r=JSON.stringify(d);$("#pageFieldParams").val(r)}else $("#pageFieldParams").val("");return r}