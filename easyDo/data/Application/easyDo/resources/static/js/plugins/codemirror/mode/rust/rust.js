!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){"use strict";e.defineMode("rust",(function(){var e,t,n={if:"if-style",while:"if-style",loop:"else-style",else:"else-style",do:"else-style",ret:"else-style",fail:"else-style",break:"atom",cont:"atom",const:"let",resource:"fn",let:"let",fn:"fn",for:"for",alt:"alt",iface:"iface",impl:"impl",type:"type",enum:"enum",mod:"mod",as:"op",true:"atom",false:"atom",assert:"op",check:"op",claim:"op",native:"ignore",unsafe:"ignore",import:"else-style",export:"else-style",copy:"op",log:"op",log_err:"op",use:"op",bind:"op",self:"atom",struct:"enum"},r=function(){for(var e={fn:"fn",block:"fn",obj:"obj"},t="bool uint int i8 i16 i32 i64 u8 u16 u32 u64 float f32 f64 str char".split(" "),n=0,r=t.length;n<r;++n)e[t[n]]="atom";return e}(),o=/[+\-*&%=<>!?|\.@]/;function a(t,n){return e=t,n}function i(n,r){var i=n.next();if('"'==i)return r.tokenize=u,r.tokenize(n,r);if("'"==i)return e="atom",n.eat("\\")?n.skipTo("'")?(n.next(),"string"):"error":(n.next(),n.eat("'")?"string":"error");if("/"==i){if(n.eat("/"))return n.skipToEnd(),"comment";if(n.eat("*"))return r.tokenize=l(1),r.tokenize(n,r)}if("#"==i)return n.eat("[")?(e="open-attr",null):(n.eatWhile(/\w/),a("macro","meta"));if(":"==i&&n.match(":<"))return a("op",null);if(i.match(/\d/)||"."==i&&n.eat(/\d/)){var c=!1;return n.match(/^x[\da-f]+/i)||n.match(/^b[01]+/)||(n.eatWhile(/\d/),n.eat(".")&&(c=!0,n.eatWhile(/\d/)),n.match(/^e[+\-]?\d+/i)&&(c=!0)),c?n.match(/^f(?:32|64)/):n.match(/^[ui](?:8|16|32|64)/),a("atom","number")}return i.match(/[()\[\]{}:;,]/)?a(i,null):"-"==i&&n.eat(">")?a("->",null):i.match(o)?(n.eatWhile(o),a("op",null)):(n.eatWhile(/\w/),t=n.current(),n.match(/^::\w/)?(n.backUp(1),a("prefix","variable-2")):r.keywords.propertyIsEnumerable(t)?a(r.keywords[t],t.match(/true|false/)?"atom":"keyword"):a("name","variable"))}function u(e,t){for(var n,r=!1;n=e.next();){if('"'==n&&!r)return t.tokenize=i,a("atom","string");r=!r&&"\\"==n}return a("op","string")}function l(e){return function(t,n){for(var r,o=null;r=t.next();){if("/"==r&&"*"==o){if(1==e){n.tokenize=i;break}return n.tokenize=l(e-1),n.tokenize(t,n)}if("*"==r&&"/"==o)return n.tokenize=l(e+1),n.tokenize(t,n);o=r}return"comment"}}var c={state:null,stream:null,marked:null,cc:null};function f(){for(var e=arguments.length-1;e>=0;e--)c.cc.push(arguments[e])}function m(){return f.apply(null,arguments),!0}function d(e,t){var n=function(){var n=c.state;n.lexical={indented:n.indented,column:c.stream.column(),type:e,prev:n.lexical,info:t}};return n.lex=!0,n}function s(){var e=c.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function k(){c.state.keywords=r}function p(){c.state.keywords=n}function h(e,t){function n(r){return","==r?m(e,n):r==t?m():m(n)}return function(r){return r==t?m():f(e,n)}}function y(e,t){return m(d("stat",t),e,s,x)}function x(e){return"}"==e?m():"let"==e?y(W,"let"):"fn"==e?y(S):"type"==e?m(d("stat"),I,b,s,x):"enum"==e?y(O):"mod"==e?y(T):"iface"==e?y(q):"impl"==e?y(A):"open-attr"==e?m(d("]"),h(w,"]"),s):"ignore"==e||e.match(/[\]\);,]/)?m(x):f(d("stat"),w,s,b,x)}function b(e){return";"==e?m():f()}function w(e){return"atom"==e||"name"==e?m(v):"{"==e?m(d("}"),z,s):e.match(/[\[\(]/)?Q(e,w):e.match(/[\]\)\};,]/)?f():"if-style"==e?m(w,w):"else-style"==e||"op"==e?m(w):"for"==e?m(G,M,$,w,w):"alt"==e?m(w,J):"fn"==e?m(S):"macro"==e?m(N):m()}function v(e){return"."==t?m(g):"::<"==t?m(U,v):"op"==e||":"==t?m(w):"("==e||"["==e?Q(e,w):f()}function g(){return t.match(/^\w+$/)?(c.marked="variable",m(v)):f(w)}function z(e){if("op"==e){if("|"==t)return m(C,s,d("}","block"),x);if("||"==t)return m(s,d("}","block"),x)}return"mutable"==t||t.match(/^\w+$/)&&":"==c.stream.peek()&&!c.stream.match("::",!1)?f(j(w)):f(x)}function j(e){return function n(r){return"mutable"==t||"with"==t?(c.marked="keyword",m(n)):t.match(/^\w*$/)?(c.marked="variable",m(n)):":"==r?m(e,n):"}"==r?m():m(n)}}function C(e){return"name"==e?(c.marked="def",m(C)):"op"==e&&"|"==t?m():m(C)}function W(e){return e.match(/[\]\)\};]/)?m():"="==t?m(w,E):","==e?m(W):f(G,M,W)}function E(e){return e.match(/[\]\)\};,]/)?f(W):f(w,E)}function M(e){return":"==e?m(k,B,p):f()}function $(e){return"name"==e&&"in"==t?(c.marked="keyword",m()):f()}function S(e){return"@"==t||"~"==t?(c.marked="keyword",m(S)):"name"==e?(c.marked="def",m(S)):"<"==t?m(U,S):"{"==e?f(w):"("==e?m(d(")"),h(_,")"),s,S):"->"==e?m(k,B,p,S):";"==e?m():m(S)}function I(e){return"name"==e?(c.marked="def",m(I)):"<"==t?m(U,I):"="==t?m(k,B,p):m(I)}function O(e){return"name"==e?(c.marked="def",m(O)):"<"==t?m(U,O):"="==t?m(k,B,p,b):"{"==e?m(d("}"),k,P,p,s):m(O)}function P(e){return"}"==e?m():"("==e?m(d(")"),h(B,")"),s,P):(t.match(/^\w+$/)&&(c.marked="def"),m(P))}function T(e){return"name"==e?(c.marked="def",m(T)):"{"==e?m(d("}"),x,s):f()}function q(e){return"name"==e?(c.marked="def",m(q)):"<"==t?m(U,q):"{"==e?m(d("}"),x,s):f()}function A(e){return"<"==t?m(U,A):"of"==t||"for"==t?(c.marked="keyword",m(B,A)):"name"==e?(c.marked="def",m(A)):"{"==e?m(d("}"),x,s):f()}function U(){return">"==t?m():","==t?m(U):":"==t?m(B,U):f(B,U)}function _(e){return"name"==e?(c.marked="def",m(_)):":"==e?m(k,B,p):f()}function B(e){return"name"==e?(c.marked="variable-3",m(D)):"mutable"==t?(c.marked="keyword",m(B)):"atom"==e?m(D):"op"==e||"obj"==e?m(B):"fn"==e?m(F):"{"==e?m(d("{"),j(B),s):Q(e,B)}function D(){return"<"==t?m(U):f()}function F(e){return"("==e?m(d("("),h(B,")"),s,F):"->"==e?m(B):f()}function G(e){return"name"==e?(c.marked="def",m(H)):"atom"==e?m(H):"op"==e?m(G):e.match(/[\]\)\};,]/)?f():Q(e,G)}function H(e){return"op"==e&&"."==t?m():"to"==t?(c.marked="keyword",m(G)):f()}function J(e){return"{"==e?m(d("}","alt"),K,s):f()}function K(e){return"}"==e?m():"|"==e?m(K):"when"==t?(c.marked="keyword",m(w,L)):e.match(/[\]\);,]/)?m(K):f(G,L)}function L(e){return"{"==e?m(d("}","alt"),x,s,K):f(K)}function N(e){return e.match(/[\[\(\{]/)?Q(e,w):f()}function Q(e,t){return"["==e?m(d("]"),h(t,"]"),s):"("==e?m(d(")"),h(t,")"),s):"{"==e?m(d("}"),h(t,"}"),s):m()}return s.lex=k.lex=p.lex=!0,{startState:function(){return{tokenize:i,cc:[],lexical:{indented:-4,column:0,type:"top",align:!1},keywords:n,indented:0}},token:function(n,r){if(n.sol()&&(r.lexical.hasOwnProperty("align")||(r.lexical.align=!1),r.indented=n.indentation()),n.eatSpace())return null;e=t=null;var o=r.tokenize(n,r);return"comment"==o?o:(r.lexical.hasOwnProperty("align")||(r.lexical.align=!0),"prefix"==e?o:(t||(t=n.current()),function(t,n,r){var o=t.cc;for(c.state=t,c.stream=n,c.marked=null,c.cc=o;;)if((o.length?o.pop():x)(e)){for(;o.length&&o[o.length-1].lex;)o.pop()();return c.marked||r}}(r,n,o)))},indent:function(e,t){if(e.tokenize!=i)return 0;var n=t&&t.charAt(0),r=e.lexical,o=r.type,a=n==o;return"stat"==o?r.indented+4:r.align?r.column+(a?0:1):r.indented+(a?0:"alt"==r.info?2:4)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}})),e.defineMIME("text/x-rustsrc","rust")}));