/*! layer弹层组件拓展类 */
!function(){layer.use("skin/layer.ext.css",(function(){layer.layui_layer_extendlayerextjs=!0}));var e=layer.cache||{},a=function(a){return e.skin?" "+e.skin+" "+e.skin+"-"+a:""};layer.prompt=function(e,i){"function"==typeof(e=e||{})&&(i=e);var n,t=2==e.formType?'<textarea class="layui-layer-input">'+(e.value||"")+"</textarea>":'<input type="'+(1==e.formType?"password":"text")+'" class="layui-layer-input" value="'+(e.value||"")+'">';return layer.open($.extend({btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],content:t,skin:"layui-layer-prompt"+a("prompt"),success:function(e){(n=e.find(".layui-layer-input")).focus()},yes:function(a){var t=n.val();""===t?n.focus():t.length>(e.maxlength||500)?layer.tips("&#x6700;&#x591A;&#x8F93;&#x5165;"+(e.maxlength||500)+"&#x4E2A;&#x5B57;&#x6570;",n,{tips:1}):i&&i(t,a,n)}},e))},layer.tab=function(e){var i=(e=e||{}).tab||{};return layer.open($.extend({type:1,skin:"layui-layer-tab"+a("tab"),title:function(){var e=i.length,a=1,n="";if(e>0)for(n='<span class="layui-layer-tabnow">'+i[0].title+"</span>";e>a;a++)n+="<span>"+i[a].title+"</span>";return n}(),content:'<ul class="layui-layer-tabmain">'+function(){var e=i.length,a=1,n="";if(e>0)for(n='<li class="layui-layer-tabli xubox_tab_layer">'+(i[0].content||"no content")+"</li>";e>a;a++)n+='<li class="layui-layer-tabli">'+(i[a].content||"no  content")+"</li>";return n}()+"</ul>",success:function(e){var a=e.find(".layui-layer-title").children(),i=e.find(".layui-layer-tabmain").children();a.on("mousedown",(function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0;var a=$(this),n=a.index();a.addClass("layui-layer-tabnow").siblings().removeClass("layui-layer-tabnow"),i.eq(n).show().siblings().hide()}))}},e))},layer.photos=function(e,i,n){var t={};if((e=e||{}).photos){var l=e.photos.constructor===Object,r=l?e.photos:{},o=r.data||[],s=r.start||0;if(t.imgIndex=s+1,l){if(0===o.length)return void layer.msg("&#x6CA1;&#x6709;&#x56FE;&#x7247;")}else{var u=$(e.photos);if(0===u.find(e.img||"img").length)return;if(i||u.find(r.img||"img").each((function(a){var i=$(this);o.push({alt:i.attr("alt"),pid:i.attr("layer-pid"),src:i.attr("layer-src")||i.attr("src"),thumb:i.attr("src")}),i.on("click",(function(){layer.photos($.extend(e,{photos:{start:a,data:o,tab:e.tab},full:e.full}),!0)}))})),!i)return}t.imgprev=function(e){t.imgIndex--,t.imgIndex<1&&(t.imgIndex=o.length),t.tabimg(e)},t.imgnext=function(e,a){t.imgIndex++,t.imgIndex>o.length&&(t.imgIndex=1,a)||t.tabimg(e)},t.keyup=function(e){if(!t.end){var a=e.keyCode;e.preventDefault(),37===a?t.imgprev(!0):39===a?t.imgnext(!0):27===a&&layer.close(t.index)}},t.tabimg=function(a){o.length<=1||(r.start=t.imgIndex-1,layer.close(t.index),layer.photos(e,!0,a))},t.event=function(){t.bigimg.hover((function(){t.imgsee.show()}),(function(){t.imgsee.hide()})),t.bigimg.find(".layui-layer-imgprev").on("click",(function(e){e.preventDefault(),t.imgprev()})),t.bigimg.find(".layui-layer-imgnext").on("click",(function(e){e.preventDefault(),t.imgnext()})),$(document).on("keyup",t.keyup)},t.loadi=layer.load(1,{shade:!("shade"in e)&&.9,scrollbar:!1}),function(e,a,i){var n=new Image;n.onload=function(){n.onload=null,a(n)},n.onerror=function(e){n.onerror=null,i(e)},n.src=e}(o[s].src,(function(i){layer.close(t.loadi),t.index=layer.open($.extend({type:1,area:function(){var a=[i.width,i.height],n=[$(window).width()-100,$(window).height()-100];return!e.full&&a[0]>n[0]&&(a[0]=n[0],a[1]=a[0]*n[1]/a[0]),[a[0]+"px",a[1]+"px"]}(),title:!1,shade:.9,shadeClose:!0,closeBtn:!1,move:".layui-layer-phimg img",moveType:1,scrollbar:!1,moveOut:!0,shift:5*Math.random()|0,skin:"layui-layer-photos"+a("photos"),content:'<div class="layui-layer-phimg"><img src="'+o[s].src+'" alt="'+(o[s].alt||"")+'" layer-pid="'+o[s].pid+'"><div class="layui-layer-imgsee">'+(o.length>1?'<span class="layui-layer-imguide"><a href="javascript:;" class="layui-layer-iconext layui-layer-imgprev"></a><a href="javascript:;" class="layui-layer-iconext layui-layer-imgnext"></a></span>':"")+'<div class="layui-layer-imgbar" style="display:'+(n?"block":"")+'"><span class="layui-layer-imgtit"><a href="javascript:;">'+(o[s].alt||"")+"</a><em>"+t.imgIndex+"/"+o.length+"</em></span></div></div></div>",success:function(a,i){t.bigimg=a.find(".layui-layer-phimg"),t.imgsee=a.find(".layui-layer-imguide,.layui-layer-imgbar"),t.event(a),e.tab&&e.tab(o[s],a)},end:function(){t.end=!0,$(document).off("keyup",t.keyup)}},e))}),(function(){layer.close(t.loadi),layer.msg("&#x5F53;&#x524D;&#x56FE;&#x7247;&#x5730;&#x5740;&#x5F02;&#x5E38;<br>&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x4E0B;&#x4E00;&#x5F20;&#xFF1F;",{time:3e4,btn:["下一张","不看了"],yes:function(){o.length>1&&t.imgnext(!0,!0)}})}))}}}();