// 动态计算输入框文字数量 
;
(function($) {
	$.fn.textSum = function() {
		this.css({
			"position" : "relative"
		});
		this.each(function() {
			var $inputAndtextarea = $(this).find("input,textarea");
			var inputMaxlength = $inputAndtextarea.attr("maxlength");
			var newSum = inputMaxlength;
			if(inputMaxlength) {
				newSum = inputMaxlength - $inputAndtextarea.val().length;
			}
			if(newSum < 100) {
				$(this).addClass('two');
			}else if(newSum < 1000){
				$(this).addClass('three');
			}else {
				$(this).addClass('four');
			}
			if($(this).find('.sumtips').length) {
				$(this).children(".sumtips").html(newSum + "/" + inputMaxlength)
			}else {
				if($(this).find('.textarea-box').length) {
					$(this).append('<div class="sumtips" style="position:absolute;z-index:10;padding-left:5px;text-align:right;font-size:12px;color:#999;right:1px;padding-right:0px;height:20px!important;line-height:20px!important;bottom:-3px;">'
							+ newSum + "/" + inputMaxlength + "</div>");
				}else if($(this).closest('.field-li').hasClass('content-whole')) {
					$(this).append('<div class="sumtips" style="position:absolute;z-index:10;padding-left:5px;text-align:right;font-size:12px;color:#999;right:1px;padding-right:5px;height:20px!important;line-height:20px!important;bottom:0px;background-color:white;">'
							+ newSum + "/" + inputMaxlength + "</div>");
				}else {
					$(this).append('<div class="sumtips" style="position:absolute;z-index:10;padding-left:5px;text-align:right;font-size:12px;color:#999;right:1px;padding-right:4px;height:20px!important;line-height:20px!important;bottom:0px;background-color:white;">'
							+ newSum + "/" + inputMaxlength + "</div>");
				}
			}
			if (inputMaxlength == undefined || inputMaxlength == "undefined" || !inputMaxlength) {
				$(this).children(".sumtips").hide();
			}else {
				$(this).children(".sumtips").show();
			}
			if ($(this).children("input").length > 0) {
				var oH = $(this).height();
				$(this).children("input").css({
					"paddingRight" : "0px"
				}).siblings(".sumtips").css({
					"height" : (oH - 15) + "px",
					"line-height" : (oH - 15) + "px"
				})
			}
			if ($(this).children("textarea").length > 0) {
				$(this).children("textarea").css({
					"paddingBottom" : "30px"
				}).siblings(".sumtips").css({
					"bottom" : "-3px"
				})
			}
		});
		this.on("keyup", "input,textarea", function() {
			var newSum = $(this).attr("maxlength") - $(this).val().length;
			if($(this).closest('.textarea-box').length) {
				$(this).closest('.textarea-box').siblings(".sumtips").html(newSum + "/" + $(this).attr("maxlength"));
			}else {
				$(this).siblings(".sumtips").html(newSum + "/" + $(this).attr("maxlength"));
			}
		})
	}
})(jQuery);