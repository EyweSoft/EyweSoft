!function(e,t,o,n){"use strict";var i="treeview",s=function(t,o){this.$element=e(t),this._element=t,this._elementId=this._element.id,this._styleId=this._elementId+"-style",this.tree=[],this.nodes=[],this.selectedNode={},this._init(o)};s.defaults={injectStyle:!0,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",nodeIcon:"glyphicon glyphicon-stop",color:n,backColor:n,borderColor:n,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",enableLinks:!1,highlightSelected:!0,showBorder:!0,showTags:!1,onNodeSelected:n},s.prototype={remove:function(){this._destroy(),e.removeData(this,"plugin_"+i),e("#"+this._styleId).remove()},_destroy:function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this._unsubscribeEvents()),this.initialized=!1},_init:function(t){t.data&&("string"==typeof t.data&&(t.data=e.parseJSON(t.data)),this.tree=e.extend(!0,[],t.data),delete t.data),this.options=e.extend({},s.defaults,t),this._setInitialLevels(this.tree,0),this._destroy(),this._subscribeEvents(),this._render()},_unsubscribeEvents:function(){this.$element.off("click")},_subscribeEvents:function(){this._unsubscribeEvents(),this.$element.on("click",e.proxy(this._clickHandler,this)),"function"==typeof this.options.onNodeSelected&&this.$element.on("nodeSelected",this.options.onNodeSelected)},_clickHandler:function(t){this.options.enableLinks||t.preventDefault();var o=e(t.target),n=o.attr("class")?o.attr("class").split(" "):[],i=this._findNode(o);-1!=n.indexOf("click-expand")||-1!=n.indexOf("click-collapse")?(this._toggleNodes(i),this._render()):i&&this._setSelectedNode(i)},_findNode:function(e){var t=e.closest("li.list-group-item").attr("data-nodeid"),o=this.nodes[t];return o||console.log("Error: node does not exist"),o},_triggerNodeSelectedEvent:function(t){this.$element.trigger("nodeSelected",[e.extend(!0,{},t)])},_setSelectedNode:function(e){e&&(e===this.selectedNode?this.selectedNode={}:this._triggerNodeSelectedEvent(this.selectedNode=e),this._render())},_setInitialLevels:function(t,o){if(t){o+=1;var i=this;e.each(t,(function(e,t){o>=i.options.levels&&i._toggleNodes(t);var s=t.nodes?t.nodes:t._nodes?t._nodes:n;if(s)return i._setInitialLevels(s,o)}))}},_toggleNodes:function(e){(e.nodes||e._nodes)&&(e.nodes?(e._nodes=e.nodes,delete e.nodes):(e.nodes=e._nodes,delete e._nodes))},_render:function(){var t=this;t.initialized||(t.$element.addClass(i),t.$wrapper=e(t._template.list),t._injectStyle(),t.initialized=!0),t.$element.empty().append(t.$wrapper.empty()),t.nodes=[],t._buildTree(t.tree,0)},_buildTree:function(t,o){if(t){o+=1;var n=this;e.each(t,(function(t,i){i.nodeId=n.nodes.length,n.nodes.push(i);for(var s=e(n._template.item).addClass("node-"+n._elementId).addClass(i===n.selectedNode?"node-selected":"").attr("data-nodeid",i.nodeId).attr("style",n._buildStyleOverride(i)),l=0;l<o-1;l++)s.append(n._template.indent);if(i._nodes?s.append(e(n._template.iconWrapper).append(e(n._template.icon).addClass("click-expand").addClass(n.options.expandIcon))):i.nodes?s.append(e(n._template.iconWrapper).append(e(n._template.icon).addClass("click-collapse").addClass(n.options.collapseIcon))):s.append(e(n._template.iconWrapper).append(e(n._template.icon).addClass("glyphicon"))),s.append(e(n._template.iconWrapper).append(e(n._template.icon).addClass(i.icon?i.icon:n.options.nodeIcon))),n.options.enableLinks?s.append(e(n._template.link).attr("href",i.href).append(i.text)):s.append(i.text),n.options.showTags&&i.tags&&e.each(i.tags,(function(t,o){s.append(e(n._template.badge).append(o))})),n.$wrapper.append(s),i.nodes)return n._buildTree(i.nodes,o)}))}},_buildStyleOverride:function(e){var t="";return this.options.highlightSelected&&e===this.selectedNode?t+="color:"+this.options.selectedColor+";":e.color&&(t+="color:"+e.color+";"),this.options.highlightSelected&&e===this.selectedNode?t+="background-color:"+this.options.selectedBackColor+";":e.backColor&&(t+="background-color:"+e.backColor+";"),t},_injectStyle:function(){this.options.injectStyle&&!o.getElementById(this._styleId)&&e('<style type="text/css" id="'+this._styleId+'"> '+this._buildStyle()+" </style>").appendTo("head")},_buildStyle:function(){var e=".node-"+this._elementId+"{";return this.options.color&&(e+="color:"+this.options.color+";"),this.options.backColor&&(e+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(e+="border:1px solid "+this.options.borderColor+";"):e+="border:none;",e+="}",this.options.onhoverColor&&(e+=".node-"+this._elementId+":hover{background-color:"+this.options.onhoverColor+";}"),this._css+e},_template:{list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',iconWrapper:'<span class="icon"></span>',icon:"<i></i>",link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'},_css:".list-group-item{cursor:pointer;}span.indent{margin-left:10px;margin-right:10px}span.icon{margin-right:5px}"};var l=function(e){t.console&&t.console.error(e)};e.fn[i]=function(t,o){return this.each((function(){var n=e.data(this,"plugin_"+i);"string"==typeof t?n?e.isFunction(n[t])&&"_"!==t.charAt(0)?("string"==typeof o&&(o=[o]),n[t].apply(n,o)):l("No such method : "+t):l("Not initialized, can not call method : "+t):n?n._init(t):e.data(this,"plugin_"+i,new s(this,e.extend(!0,{},t)))}))}}(jQuery,window,document);