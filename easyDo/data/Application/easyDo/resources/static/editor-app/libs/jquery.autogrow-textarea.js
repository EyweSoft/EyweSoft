!function(e){e.fn.autogrow=function(t){return this.filter("textarea").each((function(){var t=this,n=e(t),i=n.height(),o=n.hasClass("autogrow-short")?0:parseInt(n.css("lineHeight"))||0,a=e("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:n.width(),fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),fontWeight:n.css("fontWeight"),lineHeight:n.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),r=function(e){var r=t.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,(function(e){return function(e,t){for(var n=0,i="";n<t;n++)i+=e;return i}("&nbsp;",e.length-1)+" "}));e&&e.data&&"keydown"===e.data.event&&13===e.keyCode&&(r+="<br />"),a.css("width",n.width()),a.html(r+(0===o?"...":"")),n.height(Math.max(a.height()+o,i))};n.change(r).keyup(r).keydown({event:"keydown"},r),e(window).resize(r),r()}))}}(jQuery);