/**
 * angular-ui-utils - Swiss-Army-Knife of AngularJS tools (with no external dependencies!)
 * @version v0.0.4 - 2013-08-28
 * @link http://angular-ui.github.com
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("ui.event",[]).directive("uiEvent",["$parse",function(e){return function(n,i,t){var r=n.$eval(t.uiEvent);angular.forEach(r,(function(t,r){var u=e(t);i.bind(r,(function(e){var i=Array.prototype.slice.call(arguments);i=i.splice(1),u(n,{$event:e,$params:i}),n.$$phase||n.$apply()}))}))}}]),angular.module("ui.format",[]).filter("format",(function(){return function(e,n){var i=e;if(angular.isString(i)&&void 0!==n)if(angular.isArray(n)||angular.isObject(n)||(n=[n]),angular.isArray(n)){var t=n.length;i=i.replace(/\$([0-9]+)/g,(function(e,i){return(i=parseInt(i,10))>=0&&t>i?n[i]:e}))}else angular.forEach(n,(function(e,n){i=i.split(":"+n).join(e)}));return i}})),angular.module("ui.highlight",[]).filter("highlight",(function(){return function(e,n,i){return n||angular.isNumber(n)?(e=e.toString(),n=n.toString(),i?e.split(n).join('<span class="ui-match">'+n+"</span>"):e.replace(new RegExp(n,"gi"),'<span class="ui-match">$&</span>')):e}})),angular.module("ui.include",[]).directive("uiInclude",["$http","$templateCache","$anchorScroll","$compile",function(e,n,i,t){return{restrict:"ECA",terminal:!0,compile:function(r,u){var a=u.uiInclude||u.src,o=u.fragment||"",l=u.onload||"",c=u.autoscroll;return function(r,u){function s(){var s=++d,h=r.$eval(a),p=r.$eval(o);h?e.get(h,{cache:n}).success((function(e){var n;s===d&&(f&&f.$destroy(),f=r.$new(),n=p?angular.element("<div/>").html(e).find(p):angular.element("<div/>").html(e).contents(),u.html(n),t(n)(f),!angular.isDefined(c)||c&&!r.$eval(c)||i(),f.$emit("$includeContentLoaded"),r.$eval(l))})).error((function(){s===d&&g()})):g()}var f,d=0,g=function(){f&&(f.$destroy(),f=null),u.html("")};r.$watch(o,s),r.$watch(a,s)}}}}]),angular.module("ui.indeterminate",[]).directive("uiIndeterminate",[function(){return{compile:function(e,n){return n.type&&"checkbox"===n.type.toLowerCase()?function(e,n,i){e.$watch(i.uiIndeterminate,(function(e){n[0].indeterminate=!!e}))}:angular.noop}}}]),angular.module("ui.inflector",[]).filter("inflector",(function(){function e(e){return e.replace(/^([a-z])|\s+([a-z])/g,(function(e){return e.toUpperCase()}))}function n(e,n){return e.replace(/[A-Z]/g,(function(e){return n+e}))}var i={humanize:function(i){return e(n(i," ").split("_").join(" "))},underscore:function(e){return e.substr(0,1).toLowerCase()+n(e.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(n){return n.substr(0,1).toLowerCase()+e(n.split("_").join(" ")).substr(1).split(" ").join("")}};return function(e,n){return!1!==n&&angular.isString(e)?i[n=n||"humanize"](e):e}})),angular.module("ui.jq",[]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","$timeout",function(e,n){return{restrict:"A",compile:function(i,t){if(!angular.isFunction(i[t.uiJq]))throw new Error('ui-jq: The "'+t.uiJq+'" function does not exist');var r=e&&e[t.uiJq];return function(e,i,t){function u(){n((function(){i[t.uiJq].apply(i,a)}),0,!1)}var a=[];t.uiOptions?(a=e.$eval("["+t.uiOptions+"]"),angular.isObject(r)&&angular.isObject(a[0])&&(a[0]=angular.extend({},r,a[0]))):r&&(a=[r]),t.ngModel&&i.is("select,input,textarea")&&i.bind("change",(function(){i.trigger("input")})),t.uiRefresh&&e.$watch(t.uiRefresh,(function(){u()})),u()}}}}]),angular.module("ui.keypress",[]).factory("keypressHelper",["$parse",function(e){var n={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"};return function(i,t,r,u){var a,o=[];a=t.$eval(u["ui"+function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(i)]),angular.forEach(a,(function(n,i){var t,r;r=e(n),angular.forEach(i.split(" "),(function(e){t={expression:r,keys:{}},angular.forEach(e.split("-"),(function(e){t.keys[e]=!0})),o.push(t)}))})),r.bind(i,(function(e){var r=!(!e.metaKey||e.ctrlKey),u=!!e.altKey,a=!!e.ctrlKey,l=!!e.shiftKey,c=e.keyCode;"keypress"===i&&!l&&c>=97&&122>=c&&(c-=32),angular.forEach(o,(function(i){var o=i.keys[n[c]]||i.keys[c.toString()],s=!!i.keys.meta,f=!!i.keys.alt,d=!!i.keys.ctrl,g=!!i.keys.shift;o&&s===r&&f===u&&d===a&&g===l&&t.$apply((function(){i.expression(t,{$event:e})}))}))}))}}]),angular.module("ui.keypress").directive("uiKeydown",["keypressHelper",function(e){return{link:function(n,i,t){e("keydown",n,i,t)}}}]),angular.module("ui.keypress").directive("uiKeypress",["keypressHelper",function(e){return{link:function(n,i,t){e("keypress",n,i,t)}}}]),angular.module("ui.keypress").directive("uiKeyup",["keypressHelper",function(e){return{link:function(n,i,t){e("keyup",n,i,t)}}}]),angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/}}).directive("uiMask",["uiMaskConfig",function(e){return{priority:100,require:"ngModel",restrict:"A",compile:function(){var n=e;return function(e,i,t,r){function u(){return A=!1,O&&(i.unbind("blur",s),i.unbind("mousedown",f),i.unbind("mouseup",f),i.unbind("input",g),i.unbind("keyup",g),i.unbind("click",g),i.unbind("focus",g),O=!1),angular.isDefined(R)?i.attr("placeholder",R):i.removeAttr("placeholder"),angular.isDefined(q)?i.attr("maxlength",q):i.removeAttr("maxlength"),i.val(r.$modelValue),r.$viewValue=r.$modelValue,!1}function a(e){return!e.length||e.length>=b}function o(e){var n="",i=m.slice();return e=e.toString(),angular.forEach(y,(function(n){e=e.replace(n,"")})),angular.forEach(e.split(""),(function(e){i.length&&i[0].test(e)&&(n+=e,i.shift())})),n}function l(e){var n="",i=v.slice();return angular.forEach($.split(""),(function(t,r){e.length&&r===i[0]?(n+=e.charAt(0)||"_",e=e.substr(1),i.shift()):n+=t})),n}function c(e){var n=t.placeholder;return void 0!==n&&n[e]?n[e]:"_"}function s(){V=0,E=0,x&&0!==k.length||(w="",i.val(""),e.$apply((function(){r.$setViewValue("")})))}function f(e){"mousedown"===e.type?i.bind("mouseout",d):i.unbind("mouseout",d)}function d(){E=p(this),i.unbind("mouseout",d)}function g(n){var t=(n=n||{}).which,u=n.type;if(16!==t&&91!==t){var a,c=i.val(),s=S,f=o(c),d=C,g=!1,m=function(e){if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var n=document.selection.createRange();return n.moveStart("character",-e.value.length),n.text.length}return 0}(this)||0,$=V||0,y=m-$,b=v[0],k=v[f.length]||v.slice().shift(),w=E||0,x=p(this)>0,A=w>0,O=c.length>s.length||w&&c.length>s.length-w,R=c.length<s.length||w&&c.length===s.length-w,q=t>=37&&40>=t&&n.shiftKey,j=8===t||"keyup"!==u&&R&&-1===y,M=46===t||"keyup"!==u&&R&&0===y&&!A,H=(37===t||j||"click"===u)&&m>b;if(E=p(this),!q&&(!x||"click"!==u&&"keyup"!==u)){if("input"===u&&R&&!A&&f===d){for(;j&&m>b&&!h(m);)m--;for(;M&&k>m&&-1===v.indexOf(m);)m++;var _=v.indexOf(m);f=f.substring(0,_)+f.substring(_+1),g=!0}for(a=l(f),S=a,C=f,i.val(a),g&&e.$apply((function(){r.$setViewValue(f)})),O&&b>=m&&(m=b+1),H&&m--,m=m>k?k:b>m?b:m;!h(m)&&m>b&&k>m;)m+=H?-1:1;(H&&k>m||O&&!h($))&&m++,V=m,function(e,n){if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)e.focus(),e.setSelectionRange(n,n);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",n),i.select()}}(this,m)}}}function h(e){return v.indexOf(e)>-1}function p(e){return void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:document.selection?document.selection.createRange().text.length:0}var v,m,$,y,b,k,w,x,S,C,V,E,A=!1,O=!1,R=t.placeholder,q=t.maxlength,j={};t.uiOptions?(j=e.$eval("["+t.uiOptions+"]"),angular.isObject(j[0])&&(j=function(e,n){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]?angular.extend(n[i],e[i]):n[i]=angular.copy(e[i]));return n}(n,j[0]))):j=n,t.$observe("uiMask",(function(e){return angular.isDefined(e)?(function(e){var n=0;if(v=[],m=[],$="","string"==typeof e){b=0;var i=!1,t=e.split("");angular.forEach(t,(function(e,t){j.maskDefinitions[e]?(v.push(n),$+=c(t),m.push(j.maskDefinitions[e]),n++,i||b++):"?"===e?i=!0:($+=e,n++)}))}v.push(v.slice().pop()+1),y=$.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_"),A=v.length>1}(e),A?(function(){k=C=o(r.$modelValue||""),w=S=l(k);var e=(x=a(k))&&k.length?w:"";t.maxlength&&i.attr("maxlength",2*v[v.length-1]),i.attr("placeholder",$),i.val(e),r.$viewValue=e}(),O||(i.bind("blur",s),i.bind("mousedown mouseup",f),i.bind("input keyup click focus",g),O=!0),!0):u()):u()})),t.$observe("placeholder",(function(e){angular.isDefined(e)&&($=e,A&&g())})),r.$formatters.push((function(e){return A?(k=o(e||""),x=a(k),r.$setValidity("mask",x),x&&k.length?l(k):void 0):e})),r.$parsers.push((function(e){return A?(k=o(e||""),x=a(k),r.$viewValue=k.length?l(k):"",r.$setValidity("mask",x),""===k&&void 0!==r.$error.required&&r.$setValidity("required",!1),x?k:void 0):e})),i.bind("mousedown mouseup",f),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null===this)throw new TypeError;var n=Object(this),i=n.length>>>0;if(0===i)return-1;var t=0;if(arguments.length>1&&((t=Number(arguments[1]))!=t?t=0:0!==t&&1/0!==t&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=i)return-1;for(var r=t>=0?t:Math.max(i-Math.abs(t),0);i>r;r++)if(r in n&&n[r]===e)return r;return-1})}}}}]),angular.module("ui.reset",[]).value("uiResetConfig",null).directive("uiReset",["uiResetConfig",function(e){var n=null;return void 0!==e&&(n=e),{require:"ngModel",link:function(e,i,t,r){var u;u=angular.element('<a class="ui-reset" />'),i.wrap('<span class="ui-resetwrap" />').after(u),u.bind("click",(function(i){i.preventDefault(),e.$apply((function(){t.uiReset?r.$setViewValue(e.$eval(t.uiReset)):r.$setViewValue(n),r.$render()}))}))}}}]),angular.module("ui.route",[]).directive("uiRoute",["$location","$parse",function(e,n){return{restrict:"AC",scope:!0,compile:function(i,t){var r;if(t.uiRoute)r="uiRoute";else if(t.ngHref)r="ngHref";else{if(!t.href)throw new Error("uiRoute missing a route or href property on "+i[0]);r="href"}return function(i,t,u){function a(n){(hash=n.indexOf("#"))>-1&&(n=n.substr(hash+1)),(c=function(){l(i,e.path().indexOf(n)>-1)})()}function o(n){(hash=n.indexOf("#"))>-1&&(n=n.substr(hash+1)),c=function(){var t=new RegExp("^"+n+"$",["i"]);l(i,t.test(e.path()))},c()}var l=n(u.ngModel||u.routeModel||"$uiRoute").assign,c=angular.noop;switch(r){case"uiRoute":u.uiRoute?o(u.uiRoute):u.$observe("uiRoute",o);break;case"ngHref":u.ngHref?a(u.ngHref):u.$observe("ngHref",a);break;case"href":a(u.href)}i.$on("$routeChangeSuccess",(function(){c()})),i.$on("$stateChangeSuccess",(function(){c()}))}}}}]),angular.module("ui.scrollfix",[]).directive("uiScrollfix",["$window",function(e){"use strict";return{require:"^?uiScrollfixTarget",link:function(n,i,t,r){var u=i[0].offsetTop,a=r&&r.$element||angular.element(e);t.uiScrollfix?"string"==typeof t.uiScrollfix&&("-"===t.uiScrollfix.charAt(0)?t.uiScrollfix=u-parseFloat(t.uiScrollfix.substr(1)):"+"===t.uiScrollfix.charAt(0)&&(t.uiScrollfix=u+parseFloat(t.uiScrollfix.substr(1)))):t.uiScrollfix=u,a.bind("scroll",(function(){var n;angular.isDefined(e.pageYOffset)?n=e.pageYOffset:n=(document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body).scrollTop;!i.hasClass("ui-scrollfix")&&n>t.uiScrollfix?i.addClass("ui-scrollfix"):i.hasClass("ui-scrollfix")&&n<t.uiScrollfix&&i.removeClass("ui-scrollfix")}))}}}]).directive("uiScrollfixTarget",[function(){"use strict";return{controller:function(e){this.$element=e}}}]),angular.module("ui.showhide",[]).directive("uiShow",[function(){return function(e,n,i){e.$watch(i.uiShow,(function(e){e?n.addClass("ui-show"):n.removeClass("ui-show")}))}}]).directive("uiHide",[function(){return function(e,n,i){e.$watch(i.uiHide,(function(e){e?n.addClass("ui-hide"):n.removeClass("ui-hide")}))}}]).directive("uiToggle",[function(){return function(e,n,i){e.$watch(i.uiToggle,(function(e){e?n.removeClass("ui-hide").addClass("ui-show"):n.removeClass("ui-show").addClass("ui-hide")}))}}]),angular.module("ui.unique",[]).filter("unique",["$parse",function(e){return function(n,i){if(!1===i)return n;if((i||angular.isUndefined(i))&&angular.isArray(n)){var t=[],r=angular.isString(i)?e(i):function(e){return e},u=function(e){return angular.isObject(e)?r(e):e};angular.forEach(n,(function(e){for(var n=!1,i=0;i<t.length;i++)if(angular.equals(u(t[i]),u(e))){n=!0;break}n||t.push(e)})),n=t}return n}}]),angular.module("ui.validate",[]).directive("uiValidate",(function(){return{restrict:"A",require:"ngModel",link:function(e,n,i,t){var r,u={},a=e.$eval(i.uiValidate);a&&(angular.isString(a)&&(a={validator:a}),angular.forEach(a,(function(n,i){r=function(r){var u=e.$eval(n,{$value:r});return angular.isObject(u)&&angular.isFunction(u.then)?(u.then((function(){t.$setValidity(i,!0)}),(function(){t.$setValidity(i,!1)})),r):u?(t.$setValidity(i,!0),r):void t.$setValidity(i,!1)},u[i]=r,t.$formatters.push(r),t.$parsers.push(r)})),i.uiValidateWatch&&function(n){angular.isString(n)?e.$watch(n,(function(){angular.forEach(u,(function(e){e(t.$modelValue)}))})):angular.isArray(n)?angular.forEach(n,(function(n){e.$watch(n,(function(){angular.forEach(u,(function(e){e(t.$modelValue)}))}))})):angular.isObject(n)&&angular.forEach(n,(function(n,i){angular.isString(n)&&e.$watch(n,(function(){u[i](t.$modelValue)})),angular.isArray(n)&&angular.forEach(n,(function(n){e.$watch(n,(function(){u[i](t.$modelValue)}))}))}))}(e.$eval(i.uiValidateWatch)))}}})),angular.module("ui.utils",["ui.event","ui.format","ui.highlight","ui.include","ui.indeterminate","ui.inflector","ui.jq","ui.keypress","ui.mask","ui.reset","ui.route","ui.scrollfix","ui.showhide","ui.unique","ui.validate"]);