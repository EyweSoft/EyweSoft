function Svg(){}function PathParser(){this._lexer=new PathLexer,this._handler=null}function PathLexer(t){null==t&&(t=""),this.setPathData(t)}function PathToken(t,e){arguments.length>0&&this.init(t,e)}Svg.VERSION=1,Svg.NAMESPACE="http://www.w3.org/2000/svg",PathParser.PARAMCOUNT={A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0},PathParser.METHODNAME={A:"arcAbs",a:"arcRel",C:"curvetoCubicAbs",c:"curvetoCubicRel",H:"linetoHorizontalAbs",h:"linetoHorizontalRel",L:"linetoAbs",l:"linetoRel",M:"movetoAbs",m:"movetoRel",Q:"curvetoQuadraticAbs",q:"curvetoQuadraticRel",S:"curvetoCubicSmoothAbs",s:"curvetoCubicSmoothRel",T:"curvetoQuadraticSmoothAbs",t:"curvetoQuadraticSmoothRel",V:"linetoVerticalAbs",v:"linetoVerticalRel",Z:"closePath",z:"closePath"},PathParser.prototype.parsePath=function(t){if(null==t||t.namespaceURI!=Svg.NAMESPACE||"path"!=t.localName)throw new Error("PathParser.parsePath: The first parameter must be an SVG path element");this.parseData(t.getAttributeNS(null,"d"))},PathParser.prototype.parseData=function(t){if("string"!=typeof t)throw new Error("PathParser.parseData: The first parameter must be a string");null!=this._handler&&null!=this._handler.beginParse&&this._handler.beginParse();var e=this._lexer;e.setPathData(t);for(var a="BOP",r=e.getNextToken();!r.typeis(PathToken.EOD);){var n,o=new Array;switch(r.type){case PathToken.COMMAND:if("BOP"==a&&"M"!=r.text&&"m"!=r.text)throw new Error("PathParser.parseData: a path must begin with a moveto command");a=r.text,n=PathParser.PARAMCOUNT[r.text.toUpperCase()],r=e.getNextToken();break;case PathToken.NUMBER:break;default:throw new Error("PathParser.parseData: unrecognized token type: "+r.type)}for(var h=0;h<n;h++){switch(r.type){case PathToken.COMMAND:throw new Error("PathParser.parseData: parameter must be a number: "+r.text);case PathToken.NUMBER:o[h]=r.text-0;break;default:throw new Errot("PathParser.parseData: unrecognized token type: "+r.type)}r=e.getNextToken()}if(null!=this._handler){var s=this._handler,i=PathParser.METHODNAME[a];null!=s[i]&&s[i].apply(s,o)}"M"==a&&(a="L"),"m"==a&&(a="l")}},PathParser.prototype.setHandler=function(t){this._handler=t},PathLexer.VERSION=1,PathLexer.prototype.setPathData=function(t){if("string"!=typeof t)throw new Error("PathLexer.setPathData: The first parameter must be a string");this._pathData=t},PathLexer.prototype.getNextToken=function(){for(var t=null,e=this._pathData;null==t;)if(null==e||""==e)t=new PathToken(PathToken.EOD,"");else if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([AaCcHhLlMmQqSsTtVvZz])/))t=new PathToken(PathToken.COMMAND,RegExp.$1),e=e.substr(RegExp.$1.length);else{if(!e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))throw new Error("PathLexer.getNextToken: unrecognized path data "+e);t=new PathToken(PathToken.NUMBER,parseFloat(RegExp.$1)),e=e.substr(RegExp.$1.length)}return this._pathData=e,t},PathToken.UNDEFINED=0,PathToken.COMMAND=1,PathToken.NUMBER=2,PathToken.EOD=3,PathToken.prototype.init=function(t,e){this.type=t,this.text=e},PathToken.prototype.typeis=function(t){return this.type==t};