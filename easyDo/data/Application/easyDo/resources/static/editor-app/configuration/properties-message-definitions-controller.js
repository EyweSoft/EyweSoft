angular.module("activitiModeler").controller("ActivitiMessageDefinitionsCtrl",["$scope","$modal",function(e,i){i({template:"editor-app/configuration/properties/message-definitions-popup.html?version="+Date.now(),scope:e})}]),angular.module("activitiModeler").controller("ActivitiMessageDefinitionsPopupCtrl",["$scope","$q","$translate","$timeout",function(e,i,s,t){void 0!==e.property.value&&null!==e.property.value&&e.property.value.length>0?e.property.value.constructor==String?e.messageDefinitions=JSON.parse(e.property.value):e.messageDefinitions=angular.copy(e.property.value):e.messageDefinitions=[],e.selectedMessages=[],e.translationsRetrieved=!1,e.labels={};var n=s("PROPERTY.MESSAGEDEFINITIONS.ID"),a=s("PROPERTY.MESSAGEDEFINITIONS.NAME");i.all([n,a]).then((function(i){e.labels.idLabel=i[0],e.labels.nameLabel=i[1],e.translationsRetrieved=!0,e.gridOptions={data:"messageDefinitions",headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,keepLastSelected:!1,selectedItems:e.selectedMessages,columnDefs:[{field:"id",displayName:e.labels.idLabel},{field:"name",displayName:e.labels.nameLabel}]}})),e.addNewMessageDefinition=function(){e.messageDefinitions.push({id:"",name:""}),t((function(){e.gridOptions.selectItem(e.messageDefinitions.length-1,!0)}))},e.removeMessageDefinition=function(){if(e.selectedMessages&&e.selectedMessages.length>0){var i=e.messageDefinitions.indexOf(e.selectedMessages[0]);e.gridOptions.selectItem(i,!1),e.messageDefinitions.splice(i,1),e.selectedMessages.length=0,i<e.messageDefinitions.length?e.gridOptions.selectItem(i+1,!0):e.messageDefinitions.length>0&&e.gridOptions.selectItem(i-1,!0)}},e.save=function(){e.messageDefinitions.length>0?e.property.value=e.messageDefinitions:e.property.value=null,e.updatePropertyInModel(e.property),e.close()},e.cancel=function(){e.property.mode="read",e.$hide()},e.close=function(){e.property.mode="read",e.$hide()}}]);