angular.module("activitiModeler").controller("ActivitiSignalDefinitionsCtrl",["$scope","$modal",function(e,i){i({template:"editor-app/configuration/properties/signal-definitions-popup.html?version="+Date.now(),scope:e})}]),angular.module("activitiModeler").controller("ActivitiSignalDefinitionsPopupCtrl",["$scope","$q","$translate","$timeout",function(e,i,n,l){void 0!==e.property.value&&null!==e.property.value&&e.property.value.length>0?e.property.value.constructor==String?e.signalDefinitions=JSON.parse(e.property.value):e.signalDefinitions=angular.copy(e.property.value):e.signalDefinitions=[],e.selectedSignals=[],e.translationsRetrieved=!1,e.labels={};var t=n("PROPERTY.SIGNALDEFINITIONS.ID"),a=n("PROPERTY.SIGNALDEFINITIONS.NAME"),o=n("PROPERTY.SIGNALDEFINITIONS.SCOPE");i.all([t,a,o]).then((function(i){e.labels.idLabel=i[0],e.labels.nameLabel=i[1],e.labels.scopeLabel=i[2],e.translationsRetrieved=!0,e.gridOptions={data:"signalDefinitions",headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,keepLastSelected:!1,selectedItems:e.selectedSignals,columnDefs:[{field:"id",displayName:e.labels.idLabel},{field:"name",displayName:e.labels.nameLabel},{field:"scope",displayName:e.labels.scopeLabel}]}})),e.addNewSignalDefinition=function(){e.signalDefinitions.push({id:"",name:"",scope:"global"}),l((function(){e.gridOptions.selectItem(e.signalDefinitions.length-1,!0)}))},e.removeSignalDefinition=function(){if(e.selectedSignals&&e.selectedSignals.length>0){var i=e.signalDefinitions.indexOf(e.selectedSignals[0]);e.gridOptions.selectItem(i,!1),e.signalDefinitions.splice(i,1),e.selectedSignals.length=0,i<e.signalDefinitions.length?e.gridOptions.selectItem(i+1,!0):e.signalDefinitions.length>0&&e.gridOptions.selectItem(i-1,!0)}},e.save=function(){e.signalDefinitions.length>0?e.property.value=e.signalDefinitions:e.property.value=null,e.updatePropertyInModel(e.property),e.close()},e.cancel=function(){e.property.mode="read",e.$hide()},e.close=function(){e.property.mode="read",e.$hide()}}]);